{"ast":null,"code":"\"use strict\";\n\nvar _typeof3 = require(\"@babel/runtime-corejs3/helpers/typeof\");\n\nvar _sliceInstanceProperty = require(\"@babel/runtime-corejs3/core-js-stable/instance/slice\");\n\nvar _Array$from = require(\"@babel/runtime-corejs3/core-js-stable/array/from\");\n\nvar _Symbol = require(\"@babel/runtime-corejs3/core-js-stable/symbol\");\n\nvar _getIteratorMethod = require(\"@babel/runtime-corejs3/core-js/get-iterator-method\");\n\nvar _Array$isArray = require(\"@babel/runtime-corejs3/core-js-stable/array/is-array\");\n\nvar _WeakMap = require(\"@babel/runtime-corejs3/core-js-stable/weak-map\");\n\nvar _Object$defineProperty = require(\"@babel/runtime-corejs3/core-js-stable/object/define-property\");\n\nvar _Object$getOwnPropertyDescriptor = require(\"@babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptor\");\n\nvar _interopRequireDefault = require(\"@babel/runtime-corejs3/helpers/interopRequireDefault\");\n\n_Object$defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = void 0;\n\nvar _filter = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/filter\"));\n\nvar _forEach = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/for-each\"));\n\nvar _concat = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/concat\"));\n\nvar _stringify = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/json/stringify\"));\n\nvar _find = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/find\"));\n\nvar _map = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/map\"));\n\nvar _values = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/object/values\"));\n\nvar _bind = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/bind\"));\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime-corejs3/regenerator\"));\n\nvar _toConsumableArray2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/toConsumableArray\"));\n\nvar _typeof2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/typeof\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/asyncToGenerator\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/createClass\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/defineProperty\"));\n\nvar _ethers = require(\"ethers\");\n\nvar _events = _interopRequireDefault(require(\"events\"));\n\nvar _ParseObject = _interopRequireDefault(require(\"./ParseObject\"));\n\nvar _ParseQuery = _interopRequireDefault(require(\"./ParseQuery\"));\n\nvar _ParseUser = _interopRequireDefault(require(\"./ParseUser\"));\n\nvar _ParseACL = _interopRequireDefault(require(\"./ParseACL\"));\n\nvar _MoralisErd = _interopRequireDefault(require(\"./MoralisErd\"));\n\nvar _MoralisDot = _interopRequireDefault(require(\"./MoralisDot\"));\n\nvar _MoralisSol = _interopRequireDefault(require(\"./MoralisSol\"));\n\nvar _TransferUtils = _interopRequireDefault(require(\"./TransferUtils\"));\n\nvar _Cloud = require(\"./Cloud\");\n\nvar _createSigningData = _interopRequireDefault(require(\"./createSigningData\"));\n\nvar _WalletConnectWeb3Connector = _interopRequireDefault(require(\"./Web3Connector/WalletConnectWeb3Connector\"));\n\nvar _InjectedWeb3Connector = _interopRequireDefault(require(\"./Web3Connector/InjectedWeb3Connector\"));\n\nvar _NetworkWeb3Connector = _interopRequireDefault(require(\"./Web3Connector/NetworkWeb3Connector\"));\n\nvar _ParseError = _interopRequireDefault(require(\"./ParseError\"));\n\nvar _InternalWeb3Provider = _interopRequireWildcard(require(\"./InternalWeb3Provider\"));\n\nvar _detectProvider = _interopRequireDefault(require(\"@metamask/detect-provider\"));\n\nvar _context23, _context24, _context25, _context26, _context27, _context28;\n\nfunction _getRequireWildcardCache(nodeInterop) {\n  if (typeof _WeakMap !== \"function\") return null;\n  var cacheBabelInterop = new _WeakMap();\n  var cacheNodeInterop = new _WeakMap();\n  return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) {\n    return nodeInterop ? cacheNodeInterop : cacheBabelInterop;\n  })(nodeInterop);\n}\n\nfunction _interopRequireWildcard(obj, nodeInterop) {\n  if (!nodeInterop && obj && obj.__esModule) {\n    return obj;\n  }\n\n  if (obj === null || _typeof3(obj) !== \"object\" && typeof obj !== \"function\") {\n    return {\n      default: obj\n    };\n  }\n\n  var cache = _getRequireWildcardCache(nodeInterop);\n\n  if (cache && cache.has(obj)) {\n    return cache.get(obj);\n  }\n\n  var newObj = {};\n\n  for (var key in obj) {\n    if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) {\n      var desc = _Object$defineProperty && _Object$getOwnPropertyDescriptor ? _Object$getOwnPropertyDescriptor(obj, key) : null;\n\n      if (desc && (desc.get || desc.set)) {\n        _Object$defineProperty(newObj, key, desc);\n      } else {\n        newObj[key] = obj[key];\n      }\n    }\n  }\n\n  newObj.default = obj;\n\n  if (cache) {\n    cache.set(obj, newObj);\n  }\n\n  return newObj;\n}\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) {\n  var it = typeof _Symbol !== \"undefined\" && _getIteratorMethod(o) || o[\"@@iterator\"];\n\n  if (!it) {\n    if (_Array$isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n\n      var F = function F() {};\n\n      return {\n        s: F,\n        n: function n() {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function e(_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var normalCompletion = true,\n      didErr = false,\n      err;\n  return {\n    s: function s() {\n      it = it.call(o);\n    },\n    n: function n() {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function e(_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function f() {\n      try {\n        if (!normalCompletion && it.return != null) it.return();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  var _context29;\n\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n\n  var n = _sliceInstanceProperty(_context29 = Object.prototype.toString.call(o)).call(_context29, 8, -1);\n\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return _Array$from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nvar MoralisEmitter = new _events.default();\nvar WARNING = 'Non ethereum enabled browser';\nvar ERROR_WEB3_MISSING = 'Missing web3 instance, make sure to call Moralis.enableWeb3() or Moralis.authenticate()';\n\nvar MoralisWeb3 = /*#__PURE__*/function () {\n  function MoralisWeb3() {\n    (0, _classCallCheck2.default)(this, MoralisWeb3);\n  }\n\n  (0, _createClass2.default)(MoralisWeb3, null, [{\n    key: \"addListener\",\n    value: // Ethers.js instance that will be set after calling enableWeb3\n    // Internal web3 provider, containing the Ethers.js Web3 library for internal usage for handling transactions, contracts etc.\n    function value(eventName, listener) {\n      MoralisEmitter.on(eventName, listener);\n      return function () {\n        return MoralisEmitter.removeListener(eventName, listener);\n      };\n    }\n  }, {\n    key: \"on\",\n    value: function value(eventName, listener) {\n      MoralisEmitter.on(eventName, listener);\n      return function () {\n        return MoralisEmitter.removeListener(eventName, listener);\n      };\n    }\n  }, {\n    key: \"once\",\n    value: function value(eventName, listener) {\n      MoralisEmitter.once(eventName, listener);\n      return function () {\n        return MoralisEmitter.removeListener(eventName, listener);\n      };\n    }\n  }, {\n    key: \"removeListener\",\n    value: function value(eventName, listener) {\n      return MoralisEmitter.removeListener(eventName, listener);\n    }\n  }, {\n    key: \"off\",\n    value: function value(eventName, listener) {\n      return MoralisEmitter.off(eventName, listener);\n    }\n  }, {\n    key: \"removeAllListeners\",\n    value: function value(eventName, listener) {\n      return MoralisEmitter.removeAllListeners(eventName, listener);\n    }\n  }, {\n    key: \"isWeb3Enabled\",\n    value: function value() {\n      return this.ensureWeb3IsInstalled();\n    }\n  }, {\n    key: \"handleWeb3AccountChanged\",\n    value: function value(account) {\n      MoralisEmitter.emit(_InternalWeb3Provider.InternalWeb3Events.ACCOUNT_CHANGED, account);\n    }\n  }, {\n    key: \"handleWeb3ChainChanged\",\n    value: function value(chainId) {\n      MoralisEmitter.emit(_InternalWeb3Provider.InternalWeb3Events.CHAIN_CHANGED, chainId);\n    }\n  }, {\n    key: \"handleWeb3Connect\",\n    value: function value(connectInfo) {\n      MoralisEmitter.emit(_InternalWeb3Provider.InternalWeb3Events.PROVIDER_CONNECT, connectInfo);\n    }\n  }, {\n    key: \"handleWeb3Disconnect\",\n    value: function value(error) {\n      this.cleanup();\n      MoralisEmitter.emit(_InternalWeb3Provider.InternalWeb3Events.PROVIDER_DISCONNECT, error);\n    }\n  }, {\n    key: \"enableWeb3\",\n    value: function () {\n      var _enableWeb = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee(options) {\n        var _options$connector,\n            _this = this;\n\n        var Connector, connector, provider, chainId, account, _yield$this$internalW, web3;\n\n        return _regenerator.default.wrap(function (_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (this.speedyNodeApiKey) {\n                  options.speedyNodeApiKey = this.speedyNodeApiKey;\n                  options.provider = 'network';\n                }\n\n                if (!this.internalWeb3Provider) {\n                  _context.next = 4;\n                  break;\n                }\n\n                _context.next = 4;\n                return this.cleanup();\n\n              case 4:\n                Connector = (_options$connector = options === null || options === void 0 ? void 0 : options.connector) !== null && _options$connector !== void 0 ? _options$connector : MoralisWeb3.getWeb3Connector(options === null || options === void 0 ? void 0 : options.provider);\n                connector = new Connector(options);\n                this.internalWeb3Provider = new _InternalWeb3Provider.default(connector);\n                this.internalWeb3Provider.on(_InternalWeb3Provider.InternalWeb3Events.ACCOUNT_CHANGED, function (args) {\n                  return _this.handleWeb3AccountChanged(args);\n                });\n                this.internalWeb3Provider.on(_InternalWeb3Provider.InternalWeb3Events.CHAIN_CHANGED, function (args) {\n                  return _this.handleWeb3ChainChanged(args);\n                });\n                this.internalWeb3Provider.on(_InternalWeb3Provider.InternalWeb3Events.PROVIDER_CONNECT, function (args) {\n                  return _this.handleWeb3Connect(args);\n                });\n                this.internalWeb3Provider.on(_InternalWeb3Provider.InternalWeb3Events.PROVIDER_DISCONNECT, function (args) {\n                  return _this.handleWeb3Disconnect(args);\n                });\n                _context.prev = 11;\n                _context.next = 14;\n                return this.internalWeb3Provider.activate(options);\n\n              case 14:\n                _yield$this$internalW = _context.sent;\n                provider = _yield$this$internalW.provider;\n                chainId = _yield$this$internalW.chainId;\n                account = _yield$this$internalW.account;\n                _yield$this$internalW.web3;\n\n                if (provider) {\n                  _context.next = 21;\n                  break;\n                }\n\n                throw new Error('Failed to activate, no provider returned');\n\n              case 21:\n                _context.next = 28;\n                break;\n\n              case 23:\n                _context.prev = 23;\n                _context.t0 = _context[\"catch\"](11);\n                _context.next = 27;\n                return this.cleanup();\n\n              case 27:\n                throw _context.t0;\n\n              case 28:\n                web3 = null;\n                web3 = new _ethers.ethers.providers.Web3Provider(provider);\n                this.web3 = web3;\n                MoralisEmitter.emit(_InternalWeb3Provider.InternalWeb3Events.WEB3_ENABLED, {\n                  chainId: chainId,\n                  account: account,\n                  connector: connector,\n                  provider: provider,\n                  web3: web3\n                });\n                return _context.abrupt(\"return\", web3);\n\n              case 33:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[11, 23]]);\n      }));\n\n      return function () {\n        return _enableWeb.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"isDotAuth\",\n    value: function value(options) {\n      switch (options === null || options === void 0 ? void 0 : options.type) {\n        case 'dot':\n        case 'polkadot':\n        case 'kusama':\n          return true;\n\n        default:\n          return false;\n      }\n    }\n  }, {\n    key: \"isElrondAuth\",\n    value: function value(options) {\n      switch (options === null || options === void 0 ? void 0 : options.type) {\n        case 'erd':\n        case 'elrond':\n          return true;\n\n        default:\n          return false;\n      }\n    }\n  }, {\n    key: \"isSolAuth\",\n    value: function value(options) {\n      switch (options === null || options === void 0 ? void 0 : options.type) {\n        case 'sol':\n          return true;\n\n        default:\n          return false;\n      }\n    }\n  }, {\n    key: \"getWeb3Connector\",\n    value: function value(provider) {\n      switch (provider) {\n        case 'walletconnect':\n        case 'walletConnect':\n        case 'wc':\n          return _WalletConnectWeb3Connector.default;\n\n        case 'network':\n          return _NetworkWeb3Connector.default;\n\n        default:\n          return _InjectedWeb3Connector.default;\n      }\n    }\n  }, {\n    key: \"deactivateWeb3\",\n    value: function () {\n      var _deactivateWeb = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee2() {\n        return _regenerator.default.wrap(function (_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                return _context2.abrupt(\"return\", this.cleanup());\n\n              case 1:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      return function () {\n        return _deactivateWeb.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"cleanup\",\n    value: function () {\n      var _cleanup = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee3() {\n        return _regenerator.default.wrap(function (_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                if (this.web3 && this.internalWeb3Provider) {\n                  MoralisEmitter.emit(_InternalWeb3Provider.InternalWeb3Events.WEB3_DEACTIVATED, {\n                    connector: this.internalWeb3Provider.connector,\n                    provider: this.internalWeb3Provider.provider\n                  });\n                }\n\n                if (!this.internalWeb3Provider) {\n                  _context3.next = 8;\n                  break;\n                }\n\n                this.internalWeb3Provider.removeListener(_InternalWeb3Provider.InternalWeb3Events.ACCOUNT_CHANGED, this.handleWeb3AccountChanged);\n                this.internalWeb3Provider.removeListener(_InternalWeb3Provider.InternalWeb3Events.CHAIN_CHANGED, this.handleWeb3ChainChanged);\n                this.internalWeb3Provider.removeListener(_InternalWeb3Provider.InternalWeb3Events.PROVIDER_CONNECT, this.handleWeb3Connect);\n                this.internalWeb3Provider.removeListener(_InternalWeb3Provider.InternalWeb3Events.PROVIDER_DISCONNECT, this.handleWeb3Disconnect);\n                _context3.next = 8;\n                return this.internalWeb3Provider.deactivate();\n\n              case 8:\n                this.internalWeb3Provider = null;\n                this.web3 = null;\n\n              case 10:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      return function () {\n        return _cleanup.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"authenticate\",\n    value: function () {\n      var _authenticate = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee4(options) {\n        var isLoggedIn, _this$getInternalWeb, account, internalWeb3, signer, message, data, ethAddress, signature, authData, user;\n\n        return _regenerator.default.wrap(function (_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.next = 2;\n                return _ParseUser.default.currentAsync();\n\n              case 2:\n                isLoggedIn = _context4.sent;\n\n                if (!isLoggedIn) {\n                  _context4.next = 6;\n                  break;\n                }\n\n                _context4.next = 6;\n                return _ParseUser.default.logOut();\n\n              case 6:\n                _context4.next = 8;\n                return this.cleanup();\n\n              case 8:\n                if (!MoralisWeb3.isDotAuth(options)) {\n                  _context4.next = 10;\n                  break;\n                }\n\n                return _context4.abrupt(\"return\", _MoralisDot.default.authenticate(options));\n\n              case 10:\n                if (!MoralisWeb3.isElrondAuth(options)) {\n                  _context4.next = 12;\n                  break;\n                }\n\n                return _context4.abrupt(\"return\", _MoralisErd.default.authenticate(options));\n\n              case 12:\n                if (!MoralisWeb3.isSolAuth(options)) {\n                  _context4.next = 14;\n                  break;\n                }\n\n                return _context4.abrupt(\"return\", _MoralisSol.default.authenticate(options));\n\n              case 14:\n                _context4.next = 16;\n                return this.enableWeb3(options);\n\n              case 16:\n                _this$getInternalWeb = this.getInternalWeb3Provider(), account = _this$getInternalWeb.account, internalWeb3 = _this$getInternalWeb.web3, signer = _this$getInternalWeb.signer;\n\n                if (account) {\n                  _context4.next = 19;\n                  break;\n                }\n\n                throw new Error('Cannot authenticate, no account returned from provider');\n\n              case 19:\n                message = (options === null || options === void 0 ? void 0 : options.signingMessage) || MoralisWeb3.getSigningData();\n                _context4.next = 22;\n                return (0, _createSigningData.default)(message);\n\n              case 22:\n                data = _context4.sent;\n                ethAddress = account.toLowerCase();\n\n                if (ethAddress) {\n                  _context4.next = 26;\n                  break;\n                }\n\n                throw new Error('Address not found');\n\n              case 26:\n                _context4.next = 28;\n                return signer.signMessage(data);\n\n              case 28:\n                signature = _context4.sent;\n\n                if (signature) {\n                  _context4.next = 31;\n                  break;\n                }\n\n                throw new Error('Data not signed');\n\n              case 31:\n                authData = {\n                  id: ethAddress,\n                  signature: signature,\n                  data: data\n                };\n                _context4.next = 34;\n                return _ParseUser.default.logInWith('moralisEth', {\n                  authData: authData\n                });\n\n              case 34:\n                user = _context4.sent;\n\n                if (user) {\n                  _context4.next = 37;\n                  break;\n                }\n\n                throw new Error('Could not get user');\n\n              case 37:\n                _context4.next = 39;\n                return user.setACL(new _ParseACL.default(user));\n\n              case 39:\n                user.addAllUnique('accounts', [ethAddress]);\n                user.set('ethAddress', ethAddress);\n                _context4.next = 43;\n                return user.save(null, options);\n\n              case 43:\n                return _context4.abrupt(\"return\", user);\n\n              case 44:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      return function () {\n        return _authenticate.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"link\",\n    value: function () {\n      var _link = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee5(account, options) {\n        var _this$getInternalWeb2, signer, data, user, ethAddress, EthAddress, query, ethAddressRecord, signature, authData;\n\n        return _regenerator.default.wrap(function (_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                _this$getInternalWeb2 = this.getInternalWeb3Provider(), signer = _this$getInternalWeb2.signer;\n                data = (options === null || options === void 0 ? void 0 : options.signingMessage) || MoralisWeb3.getSigningData();\n                _context5.next = 4;\n                return _ParseUser.default.currentAsync();\n\n              case 4:\n                user = _context5.sent;\n                ethAddress = account.toLowerCase();\n                EthAddress = _ParseObject.default.extend('_EthAddress');\n                query = new _ParseQuery.default(EthAddress);\n                _context5.next = 10;\n                return query.get(ethAddress).catch(function () {\n                  return null;\n                });\n\n              case 10:\n                ethAddressRecord = _context5.sent;\n\n                if (ethAddressRecord) {\n                  _context5.next = 20;\n                  break;\n                }\n\n                _context5.next = 14;\n                return signer.signMessage(data);\n\n              case 14:\n                signature = _context5.sent;\n\n                if (signature) {\n                  _context5.next = 17;\n                  break;\n                }\n\n                throw new Error('Data not signed');\n\n              case 17:\n                authData = {\n                  id: ethAddress,\n                  signature: signature,\n                  data: data\n                };\n                _context5.next = 20;\n                return user.linkWith('moralisEth', {\n                  authData: authData\n                });\n\n              case 20:\n                user.addAllUnique('accounts', [ethAddress]);\n                user.set('ethAddress', ethAddress);\n                _context5.next = 24;\n                return user.save(null, options);\n\n              case 24:\n                return _context5.abrupt(\"return\", user);\n\n              case 25:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this);\n      }));\n\n      return function () {\n        return _link.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"unlink\",\n    value: function () {\n      var _unlink = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee6(account) {\n        var _user$get;\n\n        var accountsLower, EthAddress, query, ethAddressRecord, user, accounts, nextAccounts;\n        return _regenerator.default.wrap(function (_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                accountsLower = account.toLowerCase();\n                EthAddress = _ParseObject.default.extend('_EthAddress');\n                query = new _ParseQuery.default(EthAddress);\n                _context6.next = 5;\n                return query.get(accountsLower);\n\n              case 5:\n                ethAddressRecord = _context6.sent;\n                _context6.next = 8;\n                return ethAddressRecord.destroy();\n\n              case 8:\n                _context6.next = 10;\n                return _ParseUser.default.currentAsync();\n\n              case 10:\n                user = _context6.sent;\n                accounts = (_user$get = user.get('accounts')) !== null && _user$get !== void 0 ? _user$get : [];\n                nextAccounts = (0, _filter.default)(accounts).call(accounts, function (v) {\n                  return v !== accountsLower;\n                });\n                user.set('accounts', nextAccounts);\n                user.set('ethAddress', nextAccounts[0]);\n                _context6.next = 17;\n                return user._unlinkFrom('moralisEth');\n\n              case 17:\n                _context6.next = 19;\n                return user.save();\n\n              case 19:\n                return _context6.abrupt(\"return\", user);\n\n              case 20:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6);\n      }));\n\n      return function () {\n        return _unlink.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"initPlugins\",\n    value: function () {\n      var _initPlugins = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee8(installedPlugins) {\n        var _this2 = this;\n\n        var specs, allPlugins;\n        return _regenerator.default.wrap(function (_context10) {\n          while (1) {\n            switch (_context10.prev = _context10.next) {\n              case 0:\n                _context10.t0 = installedPlugins;\n\n                if (_context10.t0) {\n                  _context10.next = 5;\n                  break;\n                }\n\n                _context10.next = 4;\n                return (0, _Cloud.run)('getPluginSpecs');\n\n              case 4:\n                _context10.t0 = _context10.sent;\n\n              case 5:\n                specs = _context10.t0;\n                if (!this.Plugins) this.Plugins = {};\n\n                if (specs) {\n                  _context10.next = 9;\n                  break;\n                }\n\n                return _context10.abrupt(\"return\");\n\n              case 9:\n                allPlugins = this.Plugins;\n                (0, _forEach.default)(specs).call(specs, function (plugin) {\n                  var _context7;\n\n                  allPlugins[plugin.name] = {};\n                  (0, _forEach.default)(_context7 = plugin.functions).call(_context7, function (f) {\n                    allPlugins[plugin.name][f] = /*#__PURE__*/function () {\n                      var _ref = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee7(params, options) {\n                        var _context8;\n\n                        var response, error, triggerReturn;\n                        return _regenerator.default.wrap(function (_context9) {\n                          while (1) {\n                            switch (_context9.prev = _context9.next) {\n                              case 0:\n                                if (!options) options = {};\n                                _context9.next = 3;\n                                return (0, _Cloud.run)((0, _concat.default)(_context8 = \"\".concat(plugin.name, \"_\")).call(_context8, f), params);\n\n                              case 3:\n                                response = _context9.sent;\n\n                                if (response.data.success) {\n                                  _context9.next = 7;\n                                  break;\n                                }\n\n                                error = (0, _stringify.default)(response.data.data, null, 2);\n                                throw new Error(\"Something went wrong\\n\".concat(error));\n\n                              case 7:\n                                if (!(options.disableTriggers !== true)) {\n                                  _context9.next = 13;\n                                  break;\n                                }\n\n                                _context9.next = 10;\n                                return _this2.handleTriggers(response.data.result.triggers, response.data.result.data);\n\n                              case 10:\n                                triggerReturn = _context9.sent;\n\n                                if (!triggerReturn) {\n                                  _context9.next = 13;\n                                  break;\n                                }\n\n                                return _context9.abrupt(\"return\", triggerReturn);\n\n                              case 13:\n                                return _context9.abrupt(\"return\", response.data.result);\n\n                              case 14:\n                              case \"end\":\n                                return _context9.stop();\n                            }\n                          }\n                        }, _callee7);\n                      }));\n\n                      return function () {\n                        return _ref.apply(this, arguments);\n                      };\n                    }();\n                  });\n                });\n                this.Plugins = allPlugins;\n\n              case 12:\n              case \"end\":\n                return _context10.stop();\n            }\n          }\n        }, _callee8, this);\n      }));\n\n      return function () {\n        return _initPlugins.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"handleTriggers\",\n    value: function () {\n      var _handleTriggers = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee9(triggersArray, payload) {\n        var _this3 = this;\n\n        var _loop, i, _ret;\n\n        return _regenerator.default.wrap(function (_context14) {\n          while (1) {\n            switch (_context14.prev = _context14.next) {\n              case 0:\n                if (triggersArray) {\n                  _context14.next = 2;\n                  break;\n                }\n\n                return _context14.abrupt(\"return\");\n\n              case 2:\n                _loop = /*#__PURE__*/_regenerator.default.mark(function _loop(i) {\n                  var _triggersArray$i, _triggersArray$i$data, _triggersArray$i2, _triggersArray$i2$dat, _triggersArray$i$data2, _triggersArray$i3, _triggersArray$i3$dat, _triggersArray$i4, _triggersArray$i4$dat, _triggersArray$i5, _triggersArray$i6, _triggersArray$i7, _triggersArray$i8, _triggersArray$i9, _triggersArray$i10, _triggersArray$i11, _triggersArray$i12, _triggersArray$i13, _triggersArray$i14, _triggersArray$i15, _triggersArray$i16, _triggersArray$i17, _triggersArray$i18, _triggersArray$i19, _triggersArray$i21, _triggersArray$i23, _triggersArray$i24, _triggersArray$i25;\n\n                  var _response, _context11, _context12, _triggersArray$i20, _JSON$parse, domain, types, message, signature, result, _JSON$parse2, _domain, _types, _message;\n\n                  return _regenerator.default.wrap(function (_context13) {\n                    while (1) {\n                      switch (_context13.prev = _context13.next) {\n                        case 0:\n                          _context13.t0 = triggersArray[i].name;\n                          _context13.next = _context13.t0 === 'openUrl' ? 3 : _context13.t0 === 'web3Transaction' ? 5 : _context13.t0 === 'web3Sign' ? 18 : _context13.t0 === 'callPluginEndpoint' ? 35 : _context13.t0 === 'web3SignV4' ? 57 : 82;\n                          break;\n\n                        case 3:\n                          if (triggersArray[i].newTab) window.open(triggersArray[i].url);else window.open(triggersArray[i].url, '_self');\n                          return _context13.abrupt(\"break\", 83);\n\n                        case 5:\n                          _context13.next = 7;\n                          return _this3.getInternalWeb3Provider().signer.sendTransaction({\n                            from: (_triggersArray$i = triggersArray[i]) === null || _triggersArray$i === void 0 ? void 0 : (_triggersArray$i$data = _triggersArray$i.data) === null || _triggersArray$i$data === void 0 ? void 0 : _triggersArray$i$data.from,\n                            to: (_triggersArray$i2 = triggersArray[i]) === null || _triggersArray$i2 === void 0 ? void 0 : (_triggersArray$i2$dat = _triggersArray$i2.data) === null || _triggersArray$i2$dat === void 0 ? void 0 : _triggersArray$i2$dat.to,\n                            value: _ethers.ethers.BigNumber.from((_triggersArray$i$data2 = (_triggersArray$i3 = triggersArray[i]) === null || _triggersArray$i3 === void 0 ? void 0 : (_triggersArray$i3$dat = _triggersArray$i3.data) === null || _triggersArray$i3$dat === void 0 ? void 0 : _triggersArray$i3$dat.value) !== null && _triggersArray$i$data2 !== void 0 ? _triggersArray$i$data2 : 0),\n                            data: (_triggersArray$i4 = triggersArray[i]) === null || _triggersArray$i4 === void 0 ? void 0 : (_triggersArray$i4$dat = _triggersArray$i4.data) === null || _triggersArray$i4$dat === void 0 ? void 0 : _triggersArray$i4$dat.data\n                          });\n\n                        case 7:\n                          _response = _context13.sent;\n\n                          if (!(((_triggersArray$i5 = triggersArray[i]) === null || _triggersArray$i5 === void 0 ? void 0 : _triggersArray$i5.shouldAwait) === true)) {\n                            _context13.next = 12;\n                            break;\n                          }\n\n                          _context13.next = 11;\n                          return _response.wait();\n\n                        case 11:\n                          _response = _context13.sent;\n\n                        case 12:\n                          // Save the response returned by the web3 trasanction\n                          if (((_triggersArray$i6 = triggersArray[i]) === null || _triggersArray$i6 === void 0 ? void 0 : _triggersArray$i6.saveResponse) === true) _this3.memoryCard.save(_response); // Return payload and response\n\n                          if (!(((_triggersArray$i7 = triggersArray[i]) === null || _triggersArray$i7 === void 0 ? void 0 : _triggersArray$i7.shouldReturnPayload) === true)) {\n                            _context13.next = 15;\n                            break;\n                          }\n\n                          return _context13.abrupt(\"return\", {\n                            v: {\n                              payload: payload,\n                              response: _response\n                            }\n                          });\n\n                        case 15:\n                          if (!(((_triggersArray$i8 = triggersArray[i]) === null || _triggersArray$i8 === void 0 ? void 0 : _triggersArray$i8.shouldReturnResponse) === true)) {\n                            _context13.next = 17;\n                            break;\n                          }\n\n                          return _context13.abrupt(\"return\", {\n                            v: _response\n                          });\n\n                        case 17:\n                          return _context13.abrupt(\"break\", 83);\n\n                        case 18:\n                          if (triggersArray[i].message) {\n                            _context13.next = 20;\n                            break;\n                          }\n\n                          throw new Error('web3Sign trigger does not have a message to sign');\n\n                        case 20:\n                          if (!(!triggersArray[i].signer || triggersArray[i].signer)) {\n                            _context13.next = 22;\n                            break;\n                          }\n\n                          throw new Error('web3Sign trigger signer address missing or invalid');\n\n                        case 22:\n                          _context13.next = 24;\n                          return _this3.getInternalWeb3Provider().signer.signMessage(triggersArray[i].message);\n\n                        case 24:\n                          _response = _context13.sent;\n\n                          if (!((_triggersArray$i9 = triggersArray[i]) !== null && _triggersArray$i9 !== void 0 && _triggersArray$i9.shouldAwait)) {\n                            _context13.next = 29;\n                            break;\n                          }\n\n                          _context13.next = 28;\n                          return _response.wait();\n\n                        case 28:\n                          _response = _context13.sent;\n\n                        case 29:\n                          // Save response\n                          if (((_triggersArray$i10 = triggersArray[i]) === null || _triggersArray$i10 === void 0 ? void 0 : _triggersArray$i10.saveResponse) === true) _this3.memoryCard.save(_response); // Return payload and response\n\n                          if (!(((_triggersArray$i11 = triggersArray[i]) === null || _triggersArray$i11 === void 0 ? void 0 : _triggersArray$i11.shouldReturnPayload) === true)) {\n                            _context13.next = 32;\n                            break;\n                          }\n\n                          return _context13.abrupt(\"return\", {\n                            v: {\n                              payload: payload,\n                              response: _response\n                            }\n                          });\n\n                        case 32:\n                          if (!(((_triggersArray$i12 = triggersArray[i]) === null || _triggersArray$i12 === void 0 ? void 0 : _triggersArray$i12.shouldReturnResponse) === true)) {\n                            _context13.next = 34;\n                            break;\n                          }\n\n                          return _context13.abrupt(\"return\", {\n                            v: _response\n                          });\n\n                        case 34:\n                          return _context13.abrupt(\"break\", 83);\n\n                        case 35:\n                          if (triggersArray[i].pluginName) {\n                            _context13.next = 37;\n                            break;\n                          }\n\n                          throw new Error('callPluginEndpoint trigger does not have an plugin name to call');\n\n                        case 37:\n                          if (triggersArray[i].endpoint) {\n                            _context13.next = 39;\n                            break;\n                          }\n\n                          throw new Error('callPluginEndpoint trigger does not have an endpoint to call');\n\n                        case 39:\n                          if (!(((_triggersArray$i13 = triggersArray[i]) === null || _triggersArray$i13 === void 0 ? void 0 : _triggersArray$i13.shouldAwait) === true)) {\n                            _context13.next = 44;\n                            break;\n                          } // Check if a saved response has to be used to fill a parameter needed by the plugin\n\n\n                          if (triggersArray[i].useSavedResponse === true) {\n                            triggersArray[i].params[triggersArray[i].savedResponseAs] = _this3.memoryCard.get(triggersArray[i].savedResponseAt);\n                          } // Call the endpoint\n\n\n                          _context13.next = 43;\n                          return (0, _Cloud.run)((0, _concat.default)(_context11 = \"\".concat(triggersArray[i].pluginName, \"_\")).call(_context11, triggersArray[i].endpoint), triggersArray[i].params);\n\n                        case 43:\n                          _response = _context13.sent;\n\n                        case 44:\n                          // Call a plugin endpoint (does NOT await)\n                          if (((_triggersArray$i14 = triggersArray[i]) === null || _triggersArray$i14 === void 0 ? void 0 : _triggersArray$i14.shouldAwait) === false) {\n                            // Check if a saved response has to be used to fill a parameter needed by the plugin\n                            if (triggersArray[i].useSavedResponse === true) {\n                              triggersArray[i].params[triggersArray[i].savedResponseAs] = _this3.memoryCard.get(triggersArray[i].savedResponseAt);\n                            } // Call the endpoint\n\n\n                            _response = (0, _Cloud.run)((0, _concat.default)(_context12 = \"\".concat(triggersArray[i].pluginName, \"_\")).call(_context12, triggersArray[i].endpoint), triggersArray[i].params);\n                          } // If the response contains a trigger, run it\n\n\n                          if (!(triggersArray[i].runResponseTrigger === true)) {\n                            _context13.next = 49;\n                            break;\n                          }\n\n                          _context13.next = 48;\n                          return _this3.handleTriggers(_response.data.result.triggers, _response.data.result.data);\n\n                        case 48:\n                          _response = _context13.sent;\n\n                        case 49:\n                          // Save response\n                          if (((_triggersArray$i15 = triggersArray[i]) === null || _triggersArray$i15 === void 0 ? void 0 : _triggersArray$i15.saveResponse) === true) _this3.memoryCard.save(_response); // If should not run the response trigger, continues the loop and does not return (to avoid breaking the loop execution and run other pending triggers)\n\n                          if (!(((_triggersArray$i16 = triggersArray[i]) === null || _triggersArray$i16 === void 0 ? void 0 : _triggersArray$i16.runResponseTrigger) === false)) {\n                            _context13.next = 52;\n                            break;\n                          }\n\n                          return _context13.abrupt(\"return\", \"continue\");\n\n                        case 52:\n                          if (!(((_triggersArray$i17 = triggersArray[i]) === null || _triggersArray$i17 === void 0 ? void 0 : _triggersArray$i17.shouldReturnPayload) === true)) {\n                            _context13.next = 54;\n                            break;\n                          }\n\n                          return _context13.abrupt(\"return\", {\n                            v: {\n                              payload: 'payload',\n                              response: _response\n                            }\n                          });\n\n                        case 54:\n                          if (!(((_triggersArray$i18 = triggersArray[i]) === null || _triggersArray$i18 === void 0 ? void 0 : _triggersArray$i18.shouldReturnResponse) === true)) {\n                            _context13.next = 56;\n                            break;\n                          }\n\n                          return _context13.abrupt(\"return\", {\n                            v: _response\n                          });\n\n                        case 56:\n                          return _context13.abrupt(\"break\", 83);\n\n                        case 57:\n                          if (triggersArray[i].parameters) {\n                            _context13.next = 59;\n                            break;\n                          }\n\n                          throw new Error('web3SignV4 trigger does not have `parameters` to sign');\n\n                        case 59:\n                          if (triggersArray[i].from) {\n                            _context13.next = 61;\n                            break;\n                          }\n\n                          throw new Error('web3SignV4 trigger does not have a `from` address');\n\n                        case 61:\n                          if (!(((_triggersArray$i19 = triggersArray[i]) === null || _triggersArray$i19 === void 0 ? void 0 : _triggersArray$i19.shouldAwait) === true)) {\n                            _context13.next = 76;\n                            break;\n                          }\n\n                          _context13.prev = 62;\n                          _JSON$parse = JSON.parse(triggersArray[i].parameters[1]), domain = _JSON$parse.domain, types = _JSON$parse.types, message = _JSON$parse.message;\n\n                          if (types.EIP712Domain) {\n                            // Ethers.js will compute this automatically\n                            delete types.EIP712Domain;\n                          }\n\n                          _context13.next = 67;\n                          return _this3.getInternalWeb3Provider().signer._signTypedData(domain, types, message);\n\n                        case 67:\n                          signature = _context13.sent;\n                          result = {\n                            result: signature\n                          };\n                          if (((_triggersArray$i20 = triggersArray[i]) === null || _triggersArray$i20 === void 0 ? void 0 : _triggersArray$i20.saveResponse) === true) _this3.memoryCard.save(result);\n                          _response = result;\n                          _context13.next = 76;\n                          break;\n\n                        case 73:\n                          _context13.prev = 73;\n                          _context13.t1 = _context13[\"catch\"](62);\n                          throw new Error(_context13.t1.message || _context13.t1);\n\n                        case 76:\n                          if (((_triggersArray$i21 = triggersArray[i]) === null || _triggersArray$i21 === void 0 ? void 0 : _triggersArray$i21.shouldAwait) === false) {\n                            _JSON$parse2 = JSON.parse(triggersArray[i].parameters[1]), _domain = _JSON$parse2.domain, _types = _JSON$parse2.types, _message = _JSON$parse2.message;\n\n                            if (_types.EIP712Domain) {\n                              // Ethers.js will compute this automatically\n                              delete _types.EIP712Domain;\n                            }\n\n                            _this3.getInternalWeb3Provider().signer._signTypedData(_domain, _types, _message) // eslint-disable-next-line no-loop-func\n                            .then(function (signature) {\n                              var _triggersArray$i22;\n\n                              var result = {\n                                result: signature\n                              };\n                              if (((_triggersArray$i22 = triggersArray[i]) === null || _triggersArray$i22 === void 0 ? void 0 : _triggersArray$i22.saveResponse) === true) _this3.memoryCard.save(result);\n                              _response = result;\n                            }).catch(function (error) {\n                              throw new Error(error.message || error);\n                            });\n                          } // Return payload and response\n\n\n                          if (!(((_triggersArray$i23 = triggersArray[i]) === null || _triggersArray$i23 === void 0 ? void 0 : _triggersArray$i23.shouldReturnPayload) === true)) {\n                            _context13.next = 79;\n                            break;\n                          }\n\n                          return _context13.abrupt(\"return\", {\n                            v: {\n                              payload: payload,\n                              response: _response\n                            }\n                          });\n\n                        case 79:\n                          if (!(((_triggersArray$i24 = triggersArray[i]) === null || _triggersArray$i24 === void 0 ? void 0 : _triggersArray$i24.shouldReturnResponse) === true)) {\n                            _context13.next = 81;\n                            break;\n                          }\n\n                          return _context13.abrupt(\"return\", {\n                            v: _response\n                          });\n\n                        case 81:\n                          return _context13.abrupt(\"break\", 83);\n\n                        case 82:\n                          throw new Error(\"Unknown trigger: \\\"\".concat((_triggersArray$i25 = triggersArray[i]) === null || _triggersArray$i25 === void 0 ? void 0 : _triggersArray$i25.name, \"\\\"\"));\n\n                        case 83:\n                        case \"end\":\n                          return _context13.stop();\n                      }\n                    }\n                  }, _loop, null, [[62, 73]]);\n                });\n                i = 0;\n\n              case 4:\n                if (!(i < triggersArray.length)) {\n                  _context14.next = 14;\n                  break;\n                }\n\n                return _context14.delegateYield(_loop(i), \"t0\", 6);\n\n              case 6:\n                _ret = _context14.t0;\n\n                if (!(_ret === \"continue\")) {\n                  _context14.next = 9;\n                  break;\n                }\n\n                return _context14.abrupt(\"continue\", 11);\n\n              case 9:\n                if (!((0, _typeof2.default)(_ret) === \"object\")) {\n                  _context14.next = 11;\n                  break;\n                }\n\n                return _context14.abrupt(\"return\", _ret.v);\n\n              case 11:\n                i++;\n                _context14.next = 4;\n                break;\n\n              case 14:\n                // Delete all saved data\n                this.memoryCard.deleteSaved();\n\n              case 15:\n              case \"end\":\n                return _context14.stop();\n            }\n          }\n        }, _callee9, this);\n      }));\n\n      return function () {\n        return _handleTriggers.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"getAllERC20\",\n    value: function () {\n      var _getAllERC = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee10() {\n        var _ref2,\n            chain,\n            address,\n            result,\n            _args11 = arguments;\n\n        return _regenerator.default.wrap(function (_context15) {\n          while (1) {\n            switch (_context15.prev = _context15.next) {\n              case 0:\n                _ref2 = _args11.length > 0 && _args11[0] !== undefined ? _args11[0] : {}, chain = _ref2.chain, address = _ref2.address;\n                _context15.next = 3;\n                return (0, _Cloud.run)('getAllERC20', {\n                  chain: chain,\n                  address: address\n                });\n\n              case 3:\n                result = _context15.sent;\n                return _context15.abrupt(\"return\", result);\n\n              case 5:\n              case \"end\":\n                return _context15.stop();\n            }\n          }\n        }, _callee10);\n      }));\n\n      return function () {\n        return _getAllERC.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"getERC20\",\n    value: function () {\n      var _getERC = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee11() {\n        var _ref3,\n            chain,\n            address,\n            symbol,\n            tokenAddress,\n            result,\n            _args12 = arguments;\n\n        return _regenerator.default.wrap(function (_context16) {\n          while (1) {\n            switch (_context16.prev = _context16.next) {\n              case 0:\n                _ref3 = _args12.length > 0 && _args12[0] !== undefined ? _args12[0] : {}, chain = _ref3.chain, address = _ref3.address, symbol = _ref3.symbol, tokenAddress = _ref3.tokenAddress;\n                result = (0, _Cloud.run)('getERC20', {\n                  chain: chain,\n                  address: address,\n                  symbol: symbol,\n                  tokenAddress: tokenAddress\n                });\n                return _context16.abrupt(\"return\", result);\n\n              case 3:\n              case \"end\":\n                return _context16.stop();\n            }\n          }\n        }, _callee11);\n      }));\n\n      return function () {\n        return _getERC.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"getNFTs\",\n    value: function value() {\n      var _ref4 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          _ref4$chain = _ref4.chain,\n          chain = _ref4$chain === void 0 ? 'Eth' : _ref4$chain,\n          _ref4$address = _ref4.address,\n          address = _ref4$address === void 0 ? '' : _ref4$address;\n\n      return (0, _Cloud.run)('getNFTs_old', {\n        chain: chain,\n        address: address\n      });\n    }\n  }, {\n    key: \"getNFTsCount\",\n    value: function value() {\n      var _ref5 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          _ref5$chain = _ref5.chain,\n          chain = _ref5$chain === void 0 ? 'Eth' : _ref5$chain,\n          _ref5$address = _ref5.address,\n          address = _ref5$address === void 0 ? '' : _ref5$address;\n\n      return (0, _Cloud.run)('getNFTsCount_old', {\n        chain: chain,\n        address: address\n      });\n    }\n  }, {\n    key: \"getTransactions\",\n    value: function value() {\n      var _ref6 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          _ref6$chain = _ref6.chain,\n          chain = _ref6$chain === void 0 ? 'Eth' : _ref6$chain,\n          _ref6$address = _ref6.address,\n          address = _ref6$address === void 0 ? '' : _ref6$address,\n          _ref6$order = _ref6.order,\n          order = _ref6$order === void 0 ? 'desc' : _ref6$order;\n\n      return (0, _Cloud.run)('getTransactions', {\n        chain: chain,\n        address: address,\n        order: order\n      });\n    }\n  }, {\n    key: \"getTransactionsCount\",\n    value: function value() {\n      var _ref7 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          _ref7$chain = _ref7.chain,\n          chain = _ref7$chain === void 0 ? 'Eth' : _ref7$chain,\n          _ref7$address = _ref7.address,\n          address = _ref7$address === void 0 ? '' : _ref7$address;\n\n      return (0, _Cloud.run)('getTransactionsCount', {\n        chain: chain,\n        address: address\n      });\n    }\n  }, {\n    key: \"transfer\",\n    value: function () {\n      var _transfer = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee12() {\n        var _ref8,\n            _ref8$type,\n            type,\n            _ref8$receiver,\n            receiver,\n            _ref8$contractAddress,\n            contractAddress,\n            contract_address,\n            _ref8$amount,\n            amount,\n            _ref8$tokenId,\n            tokenId,\n            token_id,\n            _ref8$system,\n            system,\n            options,\n            _this$getInternalWeb3,\n            internalWeb3,\n            sender,\n            signer,\n            transferOperation,\n            customToken,\n            result,\n            _args13 = arguments;\n\n        return _regenerator.default.wrap(function (_context17) {\n          while (1) {\n            switch (_context17.prev = _context17.next) {\n              case 0:\n                _ref8 = _args13.length > 0 && _args13[0] !== undefined ? _args13[0] : {}, _ref8$type = _ref8.type, type = _ref8$type === void 0 ? 'native' : _ref8$type, _ref8$receiver = _ref8.receiver, receiver = _ref8$receiver === void 0 ? '' : _ref8$receiver, _ref8$contractAddress = _ref8.contractAddress, contractAddress = _ref8$contractAddress === void 0 ? '' : _ref8$contractAddress, contract_address = _ref8.contract_address, _ref8$amount = _ref8.amount, amount = _ref8$amount === void 0 ? '' : _ref8$amount, _ref8$tokenId = _ref8.tokenId, tokenId = _ref8$tokenId === void 0 ? '' : _ref8$tokenId, token_id = _ref8.token_id, _ref8$system = _ref8.system, system = _ref8$system === void 0 ? 'evm' : _ref8$system; // Allow snake-case for backwards compatibility\n                // eslint-disable-next-line camelcase\n\n                contractAddress = contractAddress || contract_address; // eslint-disable-next-line camelcase\n\n                tokenId = tokenId || token_id;\n                options = {\n                  receiver: receiver,\n                  contractAddress: contractAddress,\n                  amount: amount,\n                  tokenId: tokenId,\n                  system: system\n                };\n\n                _TransferUtils.default.isSupportedType(type);\n\n                _TransferUtils.default.validateInput(type, options);\n\n                _this$getInternalWeb3 = this.getInternalWeb3Provider(), internalWeb3 = _this$getInternalWeb3.web3, sender = _this$getInternalWeb3.account, signer = _this$getInternalWeb3.signer;\n\n                if (sender) {\n                  _context17.next = 9;\n                  break;\n                }\n\n                throw new Error('Sender address not found');\n\n              case 9:\n                if (tokenId) _TransferUtils.default.isUint256(tokenId);\n\n                if (type !== 'native') {\n                  customToken = new _ethers.ethers.Contract(contractAddress, _TransferUtils.default.abi[type], signer);\n                }\n\n                _context17.t0 = type;\n                _context17.next = _context17.t0 === 'native' ? 14 : _context17.t0 === 'erc20' ? 16 : _context17.t0 === 'erc721' ? 18 : _context17.t0 === 'erc1155' ? 20 : 22;\n                break;\n\n              case 14:\n                transferOperation = signer.sendTransaction({\n                  to: receiver,\n                  value: _ethers.ethers.BigNumber.from(amount)\n                });\n                return _context17.abrupt(\"break\", 23);\n\n              case 16:\n                transferOperation = customToken.transfer(receiver, amount, {\n                  from: sender\n                });\n                return _context17.abrupt(\"break\", 23);\n\n              case 18:\n                transferOperation = customToken.safeTransferFrom(sender, receiver, \"\".concat(tokenId), {\n                  from: sender\n                });\n                return _context17.abrupt(\"break\", 23);\n\n              case 20:\n                transferOperation = customToken.safeTransferFrom(sender, receiver, \"\".concat(tokenId), amount, '0x', {\n                  from: sender\n                });\n                return _context17.abrupt(\"break\", 23);\n\n              case 22:\n                throw new Error(\"Unknown transfer type: \\\"\".concat(type, \"\\\"\"));\n\n              case 23:\n                _context17.next = 25;\n                return transferOperation;\n\n              case 25:\n                result = _context17.sent;\n                return _context17.abrupt(\"return\", result);\n\n              case 27:\n              case \"end\":\n                return _context17.stop();\n            }\n          }\n        }, _callee12, this);\n      }));\n\n      return function () {\n        return _transfer.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"executeFunction\",\n    value: function () {\n      var _executeFunction = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee13() {\n        var _context18, _context19;\n\n        var _ref9,\n            contractAddress,\n            abi,\n            functionName,\n            msgValue,\n            _ref9$params,\n            params,\n            _ref9$overrides,\n            overrides,\n            contractOptions,\n            _this$getInternalWeb4,\n            account,\n            internalWeb3,\n            provider,\n            signerOrProvider,\n            functionData,\n            stateMutability,\n            isReadFunction,\n            currentAddress,\n            errors,\n            _iterator,\n            _step,\n            input,\n            value,\n            parsedInputs,\n            contract,\n            response,\n            _args14 = arguments;\n\n        return _regenerator.default.wrap(function (_context20) {\n          while (1) {\n            switch (_context20.prev = _context20.next) {\n              case 0:\n                _ref9 = _args14.length > 0 && _args14[0] !== undefined ? _args14[0] : {}, contractAddress = _ref9.contractAddress, abi = _ref9.abi, functionName = _ref9.functionName, msgValue = _ref9.msgValue, _ref9$params = _ref9.params, params = _ref9$params === void 0 ? {} : _ref9$params, _ref9$overrides = _ref9.overrides, overrides = _ref9$overrides === void 0 ? {} : _ref9$overrides;\n                contractOptions = {};\n                _this$getInternalWeb4 = this.getInternalWeb3Provider(), account = _this$getInternalWeb4.account, internalWeb3 = _this$getInternalWeb4.web3, provider = _this$getInternalWeb4.provider, signerOrProvider = _this$getInternalWeb4.signerOrProvider;\n                functionData = (0, _find.default)(abi).call(abi, function (x) {\n                  return x.name === functionName;\n                });\n\n                if (functionData) {\n                  _context20.next = 6;\n                  break;\n                }\n\n                throw new Error('Function does not exist in abi');\n\n              case 6:\n                stateMutability = functionData === null || functionData === void 0 ? void 0 : functionData.stateMutability;\n                isReadFunction = stateMutability === 'view' || stateMutability === 'pure';\n\n                if (isReadFunction) {\n                  _context20.next = 14;\n                  break;\n                }\n\n                if (params.from) {\n                  _context20.next = 14;\n                  break;\n                }\n\n                currentAddress = account;\n\n                if (currentAddress) {\n                  _context20.next = 13;\n                  break;\n                }\n\n                throw new Error('From address is required');\n\n              case 13:\n                contractOptions.from = currentAddress;\n\n              case 14:\n                errors = [];\n                _iterator = _createForOfIteratorHelper(functionData.inputs);\n\n                try {\n                  for (_iterator.s(); !(_step = _iterator.n()).done;) {\n                    input = _step.value;\n                    value = params[input.name];\n\n                    if (!value && typeof value !== 'number' && typeof value !== 'boolean') {\n                      errors.push(\"\".concat(input.name, \" is required\"));\n                    }\n                  }\n                } catch (err) {\n                  _iterator.e(err);\n                } finally {\n                  _iterator.f();\n                }\n\n                if (!(errors.length > 0)) {\n                  _context20.next = 19;\n                  break;\n                }\n\n                throw errors;\n\n              case 19:\n                parsedInputs = (0, _map.default)(_context18 = functionData.inputs).call(_context18, function (x) {\n                  return params[x.name];\n                });\n                contract = new _ethers.ethers.Contract(contractAddress, abi, signerOrProvider);\n                _context20.next = 23;\n                return contract[functionName].apply(contract, (0, _concat.default)(_context19 = (0, _toConsumableArray2.default)((0, _values.default)(parsedInputs))).call(_context19, [msgValue ? {\n                  value: _ethers.ethers.BigNumber.from(\"\".concat(msgValue))\n                } : {}]));\n\n              case 23:\n                response = _context20.sent;\n                return _context20.abrupt(\"return\", response);\n\n              case 25:\n              case \"end\":\n                return _context20.stop();\n            }\n          }\n        }, _callee13, this);\n      }));\n\n      return function () {\n        return _executeFunction.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"getSigningData\",\n    value: function value() {\n      return \"Moralis Authentication\";\n    }\n  }, {\n    key: \"ensureWeb3IsInstalled\",\n    value: function value() {\n      return this.internalWeb3Provider && this.internalWeb3Provider.web3 ? true : false;\n    }\n    /**\n     * Gets the internalWeb3Provider with validation to make sure it has been instansiated with 'enableWeb3()'\n     */\n\n  }, {\n    key: \"getInternalWeb3Provider\",\n    value: function value() {\n      if (!this.ensureWeb3IsInstalled()) throw new Error(ERROR_WEB3_MISSING);\n      return this.internalWeb3Provider;\n    }\n    /**\n     * Gets web3 from the internalWeb3Provider with validation to make sure it has been instansiated with 'enableWeb3()'\n     */\n\n  }, {\n    key: \"getInternalWeb3\",\n    value: function value() {\n      return this.getInternalWeb3Provider().web3;\n    }\n  }, {\n    key: \"provider\",\n    get: function get() {\n      var _this$internalWeb3Pro, _this$internalWeb3Pro2;\n\n      return (_this$internalWeb3Pro = (_this$internalWeb3Pro2 = this.internalWeb3Provider) === null || _this$internalWeb3Pro2 === void 0 ? void 0 : _this$internalWeb3Pro2.provider) !== null && _this$internalWeb3Pro !== void 0 ? _this$internalWeb3Pro : null;\n    }\n  }, {\n    key: \"connector\",\n    get: function get() {\n      var _this$internalWeb3Pro3, _this$internalWeb3Pro4;\n\n      return (_this$internalWeb3Pro3 = (_this$internalWeb3Pro4 = this.internalWeb3Provider) === null || _this$internalWeb3Pro4 === void 0 ? void 0 : _this$internalWeb3Pro4.connector) !== null && _this$internalWeb3Pro3 !== void 0 ? _this$internalWeb3Pro3 : null;\n    }\n  }, {\n    key: \"connectorType\",\n    get: function get() {\n      var _this$connector$type, _this$connector;\n\n      return (_this$connector$type = (_this$connector = this.connector) === null || _this$connector === void 0 ? void 0 : _this$connector.type) !== null && _this$connector$type !== void 0 ? _this$connector$type : null;\n    }\n  }, {\n    key: \"network\",\n    get: function get() {\n      var _this$connector$netwo, _this$connector2;\n\n      return (_this$connector$netwo = (_this$connector2 = this.connector) === null || _this$connector2 === void 0 ? void 0 : _this$connector2.network) !== null && _this$connector$netwo !== void 0 ? _this$connector$netwo : null;\n    }\n  }, {\n    key: \"account\",\n    get: function get() {\n      var _this$internalWeb3Pro5, _this$internalWeb3Pro6;\n\n      return (_this$internalWeb3Pro5 = (_this$internalWeb3Pro6 = this.internalWeb3Provider) === null || _this$internalWeb3Pro6 === void 0 ? void 0 : _this$internalWeb3Pro6.account) !== null && _this$internalWeb3Pro5 !== void 0 ? _this$internalWeb3Pro5 : null;\n    }\n  }, {\n    key: \"chainId\",\n    get: function get() {\n      var _this$internalWeb3Pro7, _this$internalWeb3Pro8;\n\n      return (_this$internalWeb3Pro7 = (_this$internalWeb3Pro8 = this.internalWeb3Provider) === null || _this$internalWeb3Pro8 === void 0 ? void 0 : _this$internalWeb3Pro8.chainId) !== null && _this$internalWeb3Pro7 !== void 0 ? _this$internalWeb3Pro7 : null;\n    }\n  }, {\n    key: \"getChainId\",\n    value: function value() {\n      return this.chainId;\n    }\n  }, {\n    key: \"_forwardToConnector\",\n    value: function value(methodName, args) {\n      var _this$getInternalWeb5 = this.getInternalWeb3Provider(),\n          connector = _this$getInternalWeb5.connector;\n\n      var hasMethod = Boolean(connector[methodName]);\n\n      if (!hasMethod) {\n        var _context21;\n\n        throw new Error((0, _concat.default)(_context21 = \"Cannot call \".concat(methodName, \", as it does not exist on connector type \\\"\")).call(_context21, connector.type, \"\\\"\"));\n      }\n\n      return connector[methodName].apply(connector, (0, _toConsumableArray2.default)(args));\n    }\n  }, {\n    key: \"switchNetwork\",\n    value: function value() {\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      return this._forwardToConnector('switchNetwork', args);\n    }\n  }, {\n    key: \"addNetwork\",\n    value: function value() {\n      for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        args[_key2] = arguments[_key2];\n      }\n\n      return this._forwardToConnector('addNetwork', args);\n    }\n  }, {\n    key: \"isMetaMaskInstalled\",\n    value: function () {\n      var _isMetaMaskInstalled = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee14() {\n        return _regenerator.default.wrap(function (_context22) {\n          while (1) {\n            switch (_context22.prev = _context22.next) {\n              case 0:\n                _context22.next = 2;\n                return (0, _detectProvider.default)();\n\n              case 2:\n                if (!_context22.sent) {\n                  _context22.next = 6;\n                  break;\n                }\n\n                _context22.t0 = true;\n                _context22.next = 7;\n                break;\n\n              case 6:\n                _context22.t0 = false;\n\n              case 7:\n                return _context22.abrupt(\"return\", _context22.t0);\n\n              case 8:\n              case \"end\":\n                return _context22.stop();\n            }\n          }\n        }, _callee14);\n      }));\n\n      return function () {\n        return _isMetaMaskInstalled.apply(this, arguments);\n      };\n    }()\n  }]);\n  return MoralisWeb3;\n}();\n\n(0, _defineProperty2.default)(MoralisWeb3, \"speedyNodeApiKey\", void 0);\n(0, _defineProperty2.default)(MoralisWeb3, \"web3\", null);\n(0, _defineProperty2.default)(MoralisWeb3, \"internalWeb3Provider\", null);\n(0, _defineProperty2.default)(MoralisWeb3, \"Plugins\", {});\n(0, _defineProperty2.default)(MoralisWeb3, \"memoryCard\", {\n  save: function save(what) {\n    this.saved = what;\n  },\n  get: function get(where) {\n    if (!this.saved) throw new Error('Nothing saved to memory card'); // In case the saved data is not an object but a simple string or number\n\n    if (where.length === 0) return this.getSaved();\n    var tmp;\n    var savedTmp = this.saved;\n\n    for (var i = 0; i < where.length; i++) {\n      tmp = savedTmp[where[i]];\n      savedTmp = tmp;\n    }\n\n    return savedTmp;\n  },\n  getSaved: function getSaved() {\n    return this.saved;\n  },\n  deleteSaved: function deleteSaved() {\n    this.saved = undefined;\n  }\n});\nMoralisWeb3.onConnect = (0, _bind.default)(_context23 = MoralisWeb3.on).call(_context23, MoralisWeb3, _InternalWeb3Provider.InternalWeb3Events.PROVIDER_CONNECT);\nMoralisWeb3.onDisconnect = (0, _bind.default)(_context24 = MoralisWeb3.on).call(_context24, MoralisWeb3, _InternalWeb3Provider.InternalWeb3Events.PROVIDER_DISCONNECT);\nMoralisWeb3.onWeb3Enabled = (0, _bind.default)(_context25 = MoralisWeb3.on).call(_context25, MoralisWeb3, _InternalWeb3Provider.InternalWeb3Events.WEB3_ENABLED);\nMoralisWeb3.onWeb3Deactivated = (0, _bind.default)(_context26 = MoralisWeb3.on).call(_context26, MoralisWeb3, _InternalWeb3Provider.InternalWeb3Events.WEB3_DEACTIVATED);\nMoralisWeb3.onChainChanged = (0, _bind.default)(_context27 = MoralisWeb3.on).call(_context27, MoralisWeb3, _InternalWeb3Provider.InternalWeb3Events.CHAIN_CHANGED);\nMoralisWeb3.onAccountChanged = (0, _bind.default)(_context28 = MoralisWeb3.on).call(_context28, MoralisWeb3, _InternalWeb3Provider.InternalWeb3Events.ACCOUNT_CHANGED);\nvar _default = MoralisWeb3;\nexports.default = _default;","map":{"version":3,"sources":["/Users/mihaibadea/publicSale/node_modules/moralis/lib/browser/MoralisWeb3.js"],"names":["_typeof3","require","_sliceInstanceProperty","_Array$from","_Symbol","_getIteratorMethod","_Array$isArray","_WeakMap","_Object$defineProperty","_Object$getOwnPropertyDescriptor","_interopRequireDefault","exports","value","default","_filter","_forEach","_concat","_stringify","_find","_map","_values","_bind","_regenerator","_toConsumableArray2","_typeof2","_asyncToGenerator2","_classCallCheck2","_createClass2","_defineProperty2","_ethers","_events","_ParseObject","_ParseQuery","_ParseUser","_ParseACL","_MoralisErd","_MoralisDot","_MoralisSol","_TransferUtils","_Cloud","_createSigningData","_WalletConnectWeb3Connector","_InjectedWeb3Connector","_NetworkWeb3Connector","_ParseError","_InternalWeb3Provider","_interopRequireWildcard","_detectProvider","_context23","_context24","_context25","_context26","_context27","_context28","_getRequireWildcardCache","nodeInterop","cacheBabelInterop","cacheNodeInterop","obj","__esModule","cache","has","get","newObj","key","Object","prototype","hasOwnProperty","call","desc","set","_createForOfIteratorHelper","o","allowArrayLike","it","_unsupportedIterableToArray","length","i","F","s","n","done","e","_e","f","TypeError","normalCompletion","didErr","err","step","next","_e2","return","minLen","_context29","_arrayLikeToArray","toString","constructor","name","test","arr","len","arr2","Array","MoralisEmitter","WARNING","ERROR_WEB3_MISSING","MoralisWeb3","eventName","listener","on","removeListener","once","off","removeAllListeners","ensureWeb3IsInstalled","account","emit","InternalWeb3Events","ACCOUNT_CHANGED","chainId","CHAIN_CHANGED","connectInfo","PROVIDER_CONNECT","error","cleanup","PROVIDER_DISCONNECT","_enableWeb","mark","_callee","options","_options$connector","_this","Connector","connector","provider","_yield$this$internalW","web3","wrap","_context","prev","speedyNodeApiKey","internalWeb3Provider","getWeb3Connector","args","handleWeb3AccountChanged","handleWeb3ChainChanged","handleWeb3Connect","handleWeb3Disconnect","activate","sent","Error","t0","ethers","providers","Web3Provider","WEB3_ENABLED","abrupt","stop","apply","arguments","type","_deactivateWeb","_callee2","_context2","_cleanup","_callee3","_context3","WEB3_DEACTIVATED","deactivate","_authenticate","_callee4","isLoggedIn","_this$getInternalWeb","internalWeb3","signer","message","data","ethAddress","signature","authData","user","_context4","currentAsync","logOut","isDotAuth","authenticate","isElrondAuth","isSolAuth","enableWeb3","getInternalWeb3Provider","signingMessage","getSigningData","toLowerCase","signMessage","id","logInWith","setACL","addAllUnique","save","_link","_callee5","_this$getInternalWeb2","EthAddress","query","ethAddressRecord","_context5","extend","catch","linkWith","_unlink","_callee6","_user$get","accountsLower","accounts","nextAccounts","_context6","destroy","v","_unlinkFrom","_initPlugins","_callee8","installedPlugins","_this2","specs","allPlugins","_context10","run","Plugins","plugin","_context7","functions","_ref","_callee7","params","_context8","response","triggerReturn","_context9","concat","success","disableTriggers","handleTriggers","result","triggers","_handleTriggers","_callee9","triggersArray","payload","_this3","_loop","_ret","_context14","_triggersArray$i","_triggersArray$i$data","_triggersArray$i2","_triggersArray$i2$dat","_triggersArray$i$data2","_triggersArray$i3","_triggersArray$i3$dat","_triggersArray$i4","_triggersArray$i4$dat","_triggersArray$i5","_triggersArray$i6","_triggersArray$i7","_triggersArray$i8","_triggersArray$i9","_triggersArray$i10","_triggersArray$i11","_triggersArray$i12","_triggersArray$i13","_triggersArray$i14","_triggersArray$i15","_triggersArray$i16","_triggersArray$i17","_triggersArray$i18","_triggersArray$i19","_triggersArray$i21","_triggersArray$i23","_triggersArray$i24","_triggersArray$i25","_response","_context11","_context12","_triggersArray$i20","_JSON$parse","domain","types","_JSON$parse2","_domain","_types","_message","_context13","newTab","window","open","url","sendTransaction","from","to","BigNumber","shouldAwait","wait","saveResponse","memoryCard","shouldReturnPayload","shouldReturnResponse","pluginName","endpoint","useSavedResponse","savedResponseAs","savedResponseAt","runResponseTrigger","parameters","JSON","parse","EIP712Domain","_signTypedData","t1","then","_triggersArray$i22","delegateYield","deleteSaved","_getAllERC","_callee10","_ref2","chain","address","_args11","_context15","undefined","_getERC","_callee11","_ref3","symbol","tokenAddress","_args12","_context16","_ref4","_ref4$chain","_ref4$address","_ref5","_ref5$chain","_ref5$address","_ref6","_ref6$chain","_ref6$address","_ref6$order","order","_ref7","_ref7$chain","_ref7$address","_transfer","_callee12","_ref8","_ref8$type","_ref8$receiver","receiver","_ref8$contractAddress","contractAddress","contract_address","_ref8$amount","amount","_ref8$tokenId","tokenId","token_id","_ref8$system","system","_this$getInternalWeb3","sender","transferOperation","customToken","_args13","_context17","isSupportedType","validateInput","isUint256","Contract","abi","transfer","safeTransferFrom","_executeFunction","_callee13","_context18","_context19","_ref9","functionName","msgValue","_ref9$params","_ref9$overrides","overrides","contractOptions","_this$getInternalWeb4","signerOrProvider","functionData","stateMutability","isReadFunction","currentAddress","errors","_iterator","_step","input","parsedInputs","contract","_args14","_context20","x","inputs","push","_this$internalWeb3Pro","_this$internalWeb3Pro2","_this$internalWeb3Pro3","_this$internalWeb3Pro4","_this$connector$type","_this$connector","_this$connector$netwo","_this$connector2","network","_this$internalWeb3Pro5","_this$internalWeb3Pro6","_this$internalWeb3Pro7","_this$internalWeb3Pro8","methodName","_this$getInternalWeb5","hasMethod","Boolean","_context21","_len","_key","_forwardToConnector","_len2","_key2","_isMetaMaskInstalled","_callee14","_context22","what","saved","where","getSaved","tmp","savedTmp","onConnect","onDisconnect","onWeb3Enabled","onWeb3Deactivated","onChainChanged","onAccountChanged","_default"],"mappings":"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","sourcesContent":["\"use strict\";\n\nvar _typeof3 = require(\"@babel/runtime-corejs3/helpers/typeof\");\n\nvar _sliceInstanceProperty = require(\"@babel/runtime-corejs3/core-js-stable/instance/slice\");\n\nvar _Array$from = require(\"@babel/runtime-corejs3/core-js-stable/array/from\");\n\nvar _Symbol = require(\"@babel/runtime-corejs3/core-js-stable/symbol\");\n\nvar _getIteratorMethod = require(\"@babel/runtime-corejs3/core-js/get-iterator-method\");\n\nvar _Array$isArray = require(\"@babel/runtime-corejs3/core-js-stable/array/is-array\");\n\nvar _WeakMap = require(\"@babel/runtime-corejs3/core-js-stable/weak-map\");\n\nvar _Object$defineProperty = require(\"@babel/runtime-corejs3/core-js-stable/object/define-property\");\n\nvar _Object$getOwnPropertyDescriptor = require(\"@babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptor\");\n\nvar _interopRequireDefault = require(\"@babel/runtime-corejs3/helpers/interopRequireDefault\");\n\n_Object$defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = void 0;\n\nvar _filter = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/filter\"));\n\nvar _forEach = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/for-each\"));\n\nvar _concat = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/concat\"));\n\nvar _stringify = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/json/stringify\"));\n\nvar _find = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/find\"));\n\nvar _map = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/map\"));\n\nvar _values = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/object/values\"));\n\nvar _bind = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/bind\"));\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime-corejs3/regenerator\"));\n\nvar _toConsumableArray2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/toConsumableArray\"));\n\nvar _typeof2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/typeof\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/asyncToGenerator\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/createClass\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/defineProperty\"));\n\nvar _ethers = require(\"ethers\");\n\nvar _events = _interopRequireDefault(require(\"events\"));\n\nvar _ParseObject = _interopRequireDefault(require(\"./ParseObject\"));\n\nvar _ParseQuery = _interopRequireDefault(require(\"./ParseQuery\"));\n\nvar _ParseUser = _interopRequireDefault(require(\"./ParseUser\"));\n\nvar _ParseACL = _interopRequireDefault(require(\"./ParseACL\"));\n\nvar _MoralisErd = _interopRequireDefault(require(\"./MoralisErd\"));\n\nvar _MoralisDot = _interopRequireDefault(require(\"./MoralisDot\"));\n\nvar _MoralisSol = _interopRequireDefault(require(\"./MoralisSol\"));\n\nvar _TransferUtils = _interopRequireDefault(require(\"./TransferUtils\"));\n\nvar _Cloud = require(\"./Cloud\");\n\nvar _createSigningData = _interopRequireDefault(require(\"./createSigningData\"));\n\nvar _WalletConnectWeb3Connector = _interopRequireDefault(require(\"./Web3Connector/WalletConnectWeb3Connector\"));\n\nvar _InjectedWeb3Connector = _interopRequireDefault(require(\"./Web3Connector/InjectedWeb3Connector\"));\n\nvar _NetworkWeb3Connector = _interopRequireDefault(require(\"./Web3Connector/NetworkWeb3Connector\"));\n\nvar _ParseError = _interopRequireDefault(require(\"./ParseError\"));\n\nvar _InternalWeb3Provider = _interopRequireWildcard(require(\"./InternalWeb3Provider\"));\n\nvar _detectProvider = _interopRequireDefault(require(\"@metamask/detect-provider\"));\n\nvar _context23, _context24, _context25, _context26, _context27, _context28;\n\nfunction _getRequireWildcardCache(nodeInterop) {\n  if (typeof _WeakMap !== \"function\") return null;\n  var cacheBabelInterop = new _WeakMap();\n  var cacheNodeInterop = new _WeakMap();\n  return (_getRequireWildcardCache = function (nodeInterop) {\n    return nodeInterop ? cacheNodeInterop : cacheBabelInterop;\n  })(nodeInterop);\n}\n\nfunction _interopRequireWildcard(obj, nodeInterop) {\n  if (!nodeInterop && obj && obj.__esModule) {\n    return obj;\n  }\n\n  if (obj === null || _typeof3(obj) !== \"object\" && typeof obj !== \"function\") {\n    return {\n      default: obj\n    };\n  }\n\n  var cache = _getRequireWildcardCache(nodeInterop);\n\n  if (cache && cache.has(obj)) {\n    return cache.get(obj);\n  }\n\n  var newObj = {};\n\n  for (var key in obj) {\n    if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) {\n      var desc = _Object$defineProperty && _Object$getOwnPropertyDescriptor ? _Object$getOwnPropertyDescriptor(obj, key) : null;\n\n      if (desc && (desc.get || desc.set)) {\n        _Object$defineProperty(newObj, key, desc);\n      } else {\n        newObj[key] = obj[key];\n      }\n    }\n  }\n\n  newObj.default = obj;\n\n  if (cache) {\n    cache.set(obj, newObj);\n  }\n\n  return newObj;\n}\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) {\n  var it = typeof _Symbol !== \"undefined\" && _getIteratorMethod(o) || o[\"@@iterator\"];\n\n  if (!it) {\n    if (_Array$isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n\n      var F = function () {};\n\n      return {\n        s: F,\n        n: function () {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function (_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var normalCompletion = true,\n      didErr = false,\n      err;\n  return {\n    s: function () {\n      it = it.call(o);\n    },\n    n: function () {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function (_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function () {\n      try {\n        if (!normalCompletion && it.return != null) it.return();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  var _context29;\n\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n\n  var n = _sliceInstanceProperty(_context29 = Object.prototype.toString.call(o)).call(_context29, 8, -1);\n\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return _Array$from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nvar MoralisEmitter = new _events.default();\nvar WARNING = 'Non ethereum enabled browser';\nvar ERROR_WEB3_MISSING = 'Missing web3 instance, make sure to call Moralis.enableWeb3() or Moralis.authenticate()';\n\nvar MoralisWeb3 = /*#__PURE__*/function () {\n  function MoralisWeb3() {\n    (0, _classCallCheck2.default)(this, MoralisWeb3);\n  }\n\n  (0, _createClass2.default)(MoralisWeb3, null, [{\n    key: \"addListener\",\n    value: // Ethers.js instance that will be set after calling enableWeb3\n    // Internal web3 provider, containing the Ethers.js Web3 library for internal usage for handling transactions, contracts etc.\n    function (eventName, listener) {\n      MoralisEmitter.on(eventName, listener);\n      return function () {\n        return MoralisEmitter.removeListener(eventName, listener);\n      };\n    }\n  }, {\n    key: \"on\",\n    value: function (eventName, listener) {\n      MoralisEmitter.on(eventName, listener);\n      return function () {\n        return MoralisEmitter.removeListener(eventName, listener);\n      };\n    }\n  }, {\n    key: \"once\",\n    value: function (eventName, listener) {\n      MoralisEmitter.once(eventName, listener);\n      return function () {\n        return MoralisEmitter.removeListener(eventName, listener);\n      };\n    }\n  }, {\n    key: \"removeListener\",\n    value: function (eventName, listener) {\n      return MoralisEmitter.removeListener(eventName, listener);\n    }\n  }, {\n    key: \"off\",\n    value: function (eventName, listener) {\n      return MoralisEmitter.off(eventName, listener);\n    }\n  }, {\n    key: \"removeAllListeners\",\n    value: function (eventName, listener) {\n      return MoralisEmitter.removeAllListeners(eventName, listener);\n    }\n  }, {\n    key: \"isWeb3Enabled\",\n    value: function () {\n      return this.ensureWeb3IsInstalled();\n    }\n  }, {\n    key: \"handleWeb3AccountChanged\",\n    value: function (account) {\n      MoralisEmitter.emit(_InternalWeb3Provider.InternalWeb3Events.ACCOUNT_CHANGED, account);\n    }\n  }, {\n    key: \"handleWeb3ChainChanged\",\n    value: function (chainId) {\n      MoralisEmitter.emit(_InternalWeb3Provider.InternalWeb3Events.CHAIN_CHANGED, chainId);\n    }\n  }, {\n    key: \"handleWeb3Connect\",\n    value: function (connectInfo) {\n      MoralisEmitter.emit(_InternalWeb3Provider.InternalWeb3Events.PROVIDER_CONNECT, connectInfo);\n    }\n  }, {\n    key: \"handleWeb3Disconnect\",\n    value: function (error) {\n      this.cleanup();\n      MoralisEmitter.emit(_InternalWeb3Provider.InternalWeb3Events.PROVIDER_DISCONNECT, error);\n    }\n  }, {\n    key: \"enableWeb3\",\n    value: function () {\n      var _enableWeb = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee(options) {\n        var _options$connector,\n            _this = this;\n\n        var Connector, connector, provider, chainId, account, _yield$this$internalW, web3;\n\n        return _regenerator.default.wrap(function (_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (this.speedyNodeApiKey) {\n                  options.speedyNodeApiKey = this.speedyNodeApiKey;\n                  options.provider = 'network';\n                }\n\n                if (!this.internalWeb3Provider) {\n                  _context.next = 4;\n                  break;\n                }\n\n                _context.next = 4;\n                return this.cleanup();\n\n              case 4:\n                Connector = (_options$connector = options === null || options === void 0 ? void 0 : options.connector) !== null && _options$connector !== void 0 ? _options$connector : MoralisWeb3.getWeb3Connector(options === null || options === void 0 ? void 0 : options.provider);\n                connector = new Connector(options);\n                this.internalWeb3Provider = new _InternalWeb3Provider.default(connector);\n                this.internalWeb3Provider.on(_InternalWeb3Provider.InternalWeb3Events.ACCOUNT_CHANGED, function (args) {\n                  return _this.handleWeb3AccountChanged(args);\n                });\n                this.internalWeb3Provider.on(_InternalWeb3Provider.InternalWeb3Events.CHAIN_CHANGED, function (args) {\n                  return _this.handleWeb3ChainChanged(args);\n                });\n                this.internalWeb3Provider.on(_InternalWeb3Provider.InternalWeb3Events.PROVIDER_CONNECT, function (args) {\n                  return _this.handleWeb3Connect(args);\n                });\n                this.internalWeb3Provider.on(_InternalWeb3Provider.InternalWeb3Events.PROVIDER_DISCONNECT, function (args) {\n                  return _this.handleWeb3Disconnect(args);\n                });\n                _context.prev = 11;\n                _context.next = 14;\n                return this.internalWeb3Provider.activate(options);\n\n              case 14:\n                _yield$this$internalW = _context.sent;\n                provider = _yield$this$internalW.provider;\n                chainId = _yield$this$internalW.chainId;\n                account = _yield$this$internalW.account;\n                _yield$this$internalW.web3;\n\n                if (provider) {\n                  _context.next = 21;\n                  break;\n                }\n\n                throw new Error('Failed to activate, no provider returned');\n\n              case 21:\n                _context.next = 28;\n                break;\n\n              case 23:\n                _context.prev = 23;\n                _context.t0 = _context[\"catch\"](11);\n                _context.next = 27;\n                return this.cleanup();\n\n              case 27:\n                throw _context.t0;\n\n              case 28:\n                web3 = null;\n                web3 = new _ethers.ethers.providers.Web3Provider(provider);\n                this.web3 = web3;\n                MoralisEmitter.emit(_InternalWeb3Provider.InternalWeb3Events.WEB3_ENABLED, {\n                  chainId: chainId,\n                  account: account,\n                  connector: connector,\n                  provider: provider,\n                  web3: web3\n                });\n                return _context.abrupt(\"return\", web3);\n\n              case 33:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[11, 23]]);\n      }));\n\n      return function () {\n        return _enableWeb.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"isDotAuth\",\n    value: function (options) {\n      switch (options === null || options === void 0 ? void 0 : options.type) {\n        case 'dot':\n        case 'polkadot':\n        case 'kusama':\n          return true;\n\n        default:\n          return false;\n      }\n    }\n  }, {\n    key: \"isElrondAuth\",\n    value: function (options) {\n      switch (options === null || options === void 0 ? void 0 : options.type) {\n        case 'erd':\n        case 'elrond':\n          return true;\n\n        default:\n          return false;\n      }\n    }\n  }, {\n    key: \"isSolAuth\",\n    value: function (options) {\n      switch (options === null || options === void 0 ? void 0 : options.type) {\n        case 'sol':\n          return true;\n\n        default:\n          return false;\n      }\n    }\n  }, {\n    key: \"getWeb3Connector\",\n    value: function (provider) {\n      switch (provider) {\n        case 'walletconnect':\n        case 'walletConnect':\n        case 'wc':\n          return _WalletConnectWeb3Connector.default;\n\n        case 'network':\n          return _NetworkWeb3Connector.default;\n\n        default:\n          return _InjectedWeb3Connector.default;\n      }\n    }\n  }, {\n    key: \"deactivateWeb3\",\n    value: function () {\n      var _deactivateWeb = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee2() {\n        return _regenerator.default.wrap(function (_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                return _context2.abrupt(\"return\", this.cleanup());\n\n              case 1:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      return function () {\n        return _deactivateWeb.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"cleanup\",\n    value: function () {\n      var _cleanup = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee3() {\n        return _regenerator.default.wrap(function (_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                if (this.web3 && this.internalWeb3Provider) {\n                  MoralisEmitter.emit(_InternalWeb3Provider.InternalWeb3Events.WEB3_DEACTIVATED, {\n                    connector: this.internalWeb3Provider.connector,\n                    provider: this.internalWeb3Provider.provider\n                  });\n                }\n\n                if (!this.internalWeb3Provider) {\n                  _context3.next = 8;\n                  break;\n                }\n\n                this.internalWeb3Provider.removeListener(_InternalWeb3Provider.InternalWeb3Events.ACCOUNT_CHANGED, this.handleWeb3AccountChanged);\n                this.internalWeb3Provider.removeListener(_InternalWeb3Provider.InternalWeb3Events.CHAIN_CHANGED, this.handleWeb3ChainChanged);\n                this.internalWeb3Provider.removeListener(_InternalWeb3Provider.InternalWeb3Events.PROVIDER_CONNECT, this.handleWeb3Connect);\n                this.internalWeb3Provider.removeListener(_InternalWeb3Provider.InternalWeb3Events.PROVIDER_DISCONNECT, this.handleWeb3Disconnect);\n                _context3.next = 8;\n                return this.internalWeb3Provider.deactivate();\n\n              case 8:\n                this.internalWeb3Provider = null;\n                this.web3 = null;\n\n              case 10:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      return function () {\n        return _cleanup.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"authenticate\",\n    value: function () {\n      var _authenticate = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee4(options) {\n        var isLoggedIn, _this$getInternalWeb, account, internalWeb3, signer, message, data, ethAddress, signature, authData, user;\n\n        return _regenerator.default.wrap(function (_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.next = 2;\n                return _ParseUser.default.currentAsync();\n\n              case 2:\n                isLoggedIn = _context4.sent;\n\n                if (!isLoggedIn) {\n                  _context4.next = 6;\n                  break;\n                }\n\n                _context4.next = 6;\n                return _ParseUser.default.logOut();\n\n              case 6:\n                _context4.next = 8;\n                return this.cleanup();\n\n              case 8:\n                if (!MoralisWeb3.isDotAuth(options)) {\n                  _context4.next = 10;\n                  break;\n                }\n\n                return _context4.abrupt(\"return\", _MoralisDot.default.authenticate(options));\n\n              case 10:\n                if (!MoralisWeb3.isElrondAuth(options)) {\n                  _context4.next = 12;\n                  break;\n                }\n\n                return _context4.abrupt(\"return\", _MoralisErd.default.authenticate(options));\n\n              case 12:\n                if (!MoralisWeb3.isSolAuth(options)) {\n                  _context4.next = 14;\n                  break;\n                }\n\n                return _context4.abrupt(\"return\", _MoralisSol.default.authenticate(options));\n\n              case 14:\n                _context4.next = 16;\n                return this.enableWeb3(options);\n\n              case 16:\n                _this$getInternalWeb = this.getInternalWeb3Provider(), account = _this$getInternalWeb.account, internalWeb3 = _this$getInternalWeb.web3, signer = _this$getInternalWeb.signer;\n\n                if (account) {\n                  _context4.next = 19;\n                  break;\n                }\n\n                throw new Error('Cannot authenticate, no account returned from provider');\n\n              case 19:\n                message = (options === null || options === void 0 ? void 0 : options.signingMessage) || MoralisWeb3.getSigningData();\n                _context4.next = 22;\n                return (0, _createSigningData.default)(message);\n\n              case 22:\n                data = _context4.sent;\n                ethAddress = account.toLowerCase();\n\n                if (ethAddress) {\n                  _context4.next = 26;\n                  break;\n                }\n\n                throw new Error('Address not found');\n\n              case 26:\n                _context4.next = 28;\n                return signer.signMessage(data);\n\n              case 28:\n                signature = _context4.sent;\n\n                if (signature) {\n                  _context4.next = 31;\n                  break;\n                }\n\n                throw new Error('Data not signed');\n\n              case 31:\n                authData = {\n                  id: ethAddress,\n                  signature: signature,\n                  data: data\n                };\n                _context4.next = 34;\n                return _ParseUser.default.logInWith('moralisEth', {\n                  authData: authData\n                });\n\n              case 34:\n                user = _context4.sent;\n\n                if (user) {\n                  _context4.next = 37;\n                  break;\n                }\n\n                throw new Error('Could not get user');\n\n              case 37:\n                _context4.next = 39;\n                return user.setACL(new _ParseACL.default(user));\n\n              case 39:\n                user.addAllUnique('accounts', [ethAddress]);\n                user.set('ethAddress', ethAddress);\n                _context4.next = 43;\n                return user.save(null, options);\n\n              case 43:\n                return _context4.abrupt(\"return\", user);\n\n              case 44:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      return function () {\n        return _authenticate.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"link\",\n    value: function () {\n      var _link = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee5(account, options) {\n        var _this$getInternalWeb2, signer, data, user, ethAddress, EthAddress, query, ethAddressRecord, signature, authData;\n\n        return _regenerator.default.wrap(function (_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                _this$getInternalWeb2 = this.getInternalWeb3Provider(), signer = _this$getInternalWeb2.signer;\n                data = (options === null || options === void 0 ? void 0 : options.signingMessage) || MoralisWeb3.getSigningData();\n                _context5.next = 4;\n                return _ParseUser.default.currentAsync();\n\n              case 4:\n                user = _context5.sent;\n                ethAddress = account.toLowerCase();\n                EthAddress = _ParseObject.default.extend('_EthAddress');\n                query = new _ParseQuery.default(EthAddress);\n                _context5.next = 10;\n                return query.get(ethAddress).catch(function () {\n                  return null;\n                });\n\n              case 10:\n                ethAddressRecord = _context5.sent;\n\n                if (ethAddressRecord) {\n                  _context5.next = 20;\n                  break;\n                }\n\n                _context5.next = 14;\n                return signer.signMessage(data);\n\n              case 14:\n                signature = _context5.sent;\n\n                if (signature) {\n                  _context5.next = 17;\n                  break;\n                }\n\n                throw new Error('Data not signed');\n\n              case 17:\n                authData = {\n                  id: ethAddress,\n                  signature: signature,\n                  data: data\n                };\n                _context5.next = 20;\n                return user.linkWith('moralisEth', {\n                  authData: authData\n                });\n\n              case 20:\n                user.addAllUnique('accounts', [ethAddress]);\n                user.set('ethAddress', ethAddress);\n                _context5.next = 24;\n                return user.save(null, options);\n\n              case 24:\n                return _context5.abrupt(\"return\", user);\n\n              case 25:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this);\n      }));\n\n      return function () {\n        return _link.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"unlink\",\n    value: function () {\n      var _unlink = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee6(account) {\n        var _user$get;\n\n        var accountsLower, EthAddress, query, ethAddressRecord, user, accounts, nextAccounts;\n        return _regenerator.default.wrap(function (_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                accountsLower = account.toLowerCase();\n                EthAddress = _ParseObject.default.extend('_EthAddress');\n                query = new _ParseQuery.default(EthAddress);\n                _context6.next = 5;\n                return query.get(accountsLower);\n\n              case 5:\n                ethAddressRecord = _context6.sent;\n                _context6.next = 8;\n                return ethAddressRecord.destroy();\n\n              case 8:\n                _context6.next = 10;\n                return _ParseUser.default.currentAsync();\n\n              case 10:\n                user = _context6.sent;\n                accounts = (_user$get = user.get('accounts')) !== null && _user$get !== void 0 ? _user$get : [];\n                nextAccounts = (0, _filter.default)(accounts).call(accounts, function (v) {\n                  return v !== accountsLower;\n                });\n                user.set('accounts', nextAccounts);\n                user.set('ethAddress', nextAccounts[0]);\n                _context6.next = 17;\n                return user._unlinkFrom('moralisEth');\n\n              case 17:\n                _context6.next = 19;\n                return user.save();\n\n              case 19:\n                return _context6.abrupt(\"return\", user);\n\n              case 20:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6);\n      }));\n\n      return function () {\n        return _unlink.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"initPlugins\",\n    value: function () {\n      var _initPlugins = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee8(installedPlugins) {\n        var _this2 = this;\n\n        var specs, allPlugins;\n        return _regenerator.default.wrap(function (_context10) {\n          while (1) {\n            switch (_context10.prev = _context10.next) {\n              case 0:\n                _context10.t0 = installedPlugins;\n\n                if (_context10.t0) {\n                  _context10.next = 5;\n                  break;\n                }\n\n                _context10.next = 4;\n                return (0, _Cloud.run)('getPluginSpecs');\n\n              case 4:\n                _context10.t0 = _context10.sent;\n\n              case 5:\n                specs = _context10.t0;\n                if (!this.Plugins) this.Plugins = {};\n\n                if (specs) {\n                  _context10.next = 9;\n                  break;\n                }\n\n                return _context10.abrupt(\"return\");\n\n              case 9:\n                allPlugins = this.Plugins;\n                (0, _forEach.default)(specs).call(specs, function (plugin) {\n                  var _context7;\n\n                  allPlugins[plugin.name] = {};\n                  (0, _forEach.default)(_context7 = plugin.functions).call(_context7, function (f) {\n                    allPlugins[plugin.name][f] = /*#__PURE__*/function () {\n                      var _ref = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee7(params, options) {\n                        var _context8;\n\n                        var response, error, triggerReturn;\n                        return _regenerator.default.wrap(function (_context9) {\n                          while (1) {\n                            switch (_context9.prev = _context9.next) {\n                              case 0:\n                                if (!options) options = {};\n                                _context9.next = 3;\n                                return (0, _Cloud.run)((0, _concat.default)(_context8 = \"\".concat(plugin.name, \"_\")).call(_context8, f), params);\n\n                              case 3:\n                                response = _context9.sent;\n\n                                if (response.data.success) {\n                                  _context9.next = 7;\n                                  break;\n                                }\n\n                                error = (0, _stringify.default)(response.data.data, null, 2);\n                                throw new Error(\"Something went wrong\\n\".concat(error));\n\n                              case 7:\n                                if (!(options.disableTriggers !== true)) {\n                                  _context9.next = 13;\n                                  break;\n                                }\n\n                                _context9.next = 10;\n                                return _this2.handleTriggers(response.data.result.triggers, response.data.result.data);\n\n                              case 10:\n                                triggerReturn = _context9.sent;\n\n                                if (!triggerReturn) {\n                                  _context9.next = 13;\n                                  break;\n                                }\n\n                                return _context9.abrupt(\"return\", triggerReturn);\n\n                              case 13:\n                                return _context9.abrupt(\"return\", response.data.result);\n\n                              case 14:\n                              case \"end\":\n                                return _context9.stop();\n                            }\n                          }\n                        }, _callee7);\n                      }));\n\n                      return function () {\n                        return _ref.apply(this, arguments);\n                      };\n                    }();\n                  });\n                });\n                this.Plugins = allPlugins;\n\n              case 12:\n              case \"end\":\n                return _context10.stop();\n            }\n          }\n        }, _callee8, this);\n      }));\n\n      return function () {\n        return _initPlugins.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"handleTriggers\",\n    value: function () {\n      var _handleTriggers = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee9(triggersArray, payload) {\n        var _this3 = this;\n\n        var _loop, i, _ret;\n\n        return _regenerator.default.wrap(function (_context14) {\n          while (1) {\n            switch (_context14.prev = _context14.next) {\n              case 0:\n                if (triggersArray) {\n                  _context14.next = 2;\n                  break;\n                }\n\n                return _context14.abrupt(\"return\");\n\n              case 2:\n                _loop = /*#__PURE__*/_regenerator.default.mark(function _loop(i) {\n                  var _triggersArray$i, _triggersArray$i$data, _triggersArray$i2, _triggersArray$i2$dat, _triggersArray$i$data2, _triggersArray$i3, _triggersArray$i3$dat, _triggersArray$i4, _triggersArray$i4$dat, _triggersArray$i5, _triggersArray$i6, _triggersArray$i7, _triggersArray$i8, _triggersArray$i9, _triggersArray$i10, _triggersArray$i11, _triggersArray$i12, _triggersArray$i13, _triggersArray$i14, _triggersArray$i15, _triggersArray$i16, _triggersArray$i17, _triggersArray$i18, _triggersArray$i19, _triggersArray$i21, _triggersArray$i23, _triggersArray$i24, _triggersArray$i25;\n\n                  var _response, _context11, _context12, _triggersArray$i20, _JSON$parse, domain, types, message, signature, result, _JSON$parse2, _domain, _types, _message;\n\n                  return _regenerator.default.wrap(function (_context13) {\n                    while (1) {\n                      switch (_context13.prev = _context13.next) {\n                        case 0:\n                          _context13.t0 = triggersArray[i].name;\n                          _context13.next = _context13.t0 === 'openUrl' ? 3 : _context13.t0 === 'web3Transaction' ? 5 : _context13.t0 === 'web3Sign' ? 18 : _context13.t0 === 'callPluginEndpoint' ? 35 : _context13.t0 === 'web3SignV4' ? 57 : 82;\n                          break;\n\n                        case 3:\n                          if (triggersArray[i].newTab) window.open(triggersArray[i].url);else window.open(triggersArray[i].url, '_self');\n                          return _context13.abrupt(\"break\", 83);\n\n                        case 5:\n                          _context13.next = 7;\n                          return _this3.getInternalWeb3Provider().signer.sendTransaction({\n                            from: (_triggersArray$i = triggersArray[i]) === null || _triggersArray$i === void 0 ? void 0 : (_triggersArray$i$data = _triggersArray$i.data) === null || _triggersArray$i$data === void 0 ? void 0 : _triggersArray$i$data.from,\n                            to: (_triggersArray$i2 = triggersArray[i]) === null || _triggersArray$i2 === void 0 ? void 0 : (_triggersArray$i2$dat = _triggersArray$i2.data) === null || _triggersArray$i2$dat === void 0 ? void 0 : _triggersArray$i2$dat.to,\n                            value: _ethers.ethers.BigNumber.from((_triggersArray$i$data2 = (_triggersArray$i3 = triggersArray[i]) === null || _triggersArray$i3 === void 0 ? void 0 : (_triggersArray$i3$dat = _triggersArray$i3.data) === null || _triggersArray$i3$dat === void 0 ? void 0 : _triggersArray$i3$dat.value) !== null && _triggersArray$i$data2 !== void 0 ? _triggersArray$i$data2 : 0),\n                            data: (_triggersArray$i4 = triggersArray[i]) === null || _triggersArray$i4 === void 0 ? void 0 : (_triggersArray$i4$dat = _triggersArray$i4.data) === null || _triggersArray$i4$dat === void 0 ? void 0 : _triggersArray$i4$dat.data\n                          });\n\n                        case 7:\n                          _response = _context13.sent;\n\n                          if (!(((_triggersArray$i5 = triggersArray[i]) === null || _triggersArray$i5 === void 0 ? void 0 : _triggersArray$i5.shouldAwait) === true)) {\n                            _context13.next = 12;\n                            break;\n                          }\n\n                          _context13.next = 11;\n                          return _response.wait();\n\n                        case 11:\n                          _response = _context13.sent;\n\n                        case 12:\n                          // Save the response returned by the web3 trasanction\n                          if (((_triggersArray$i6 = triggersArray[i]) === null || _triggersArray$i6 === void 0 ? void 0 : _triggersArray$i6.saveResponse) === true) _this3.memoryCard.save(_response); // Return payload and response\n\n                          if (!(((_triggersArray$i7 = triggersArray[i]) === null || _triggersArray$i7 === void 0 ? void 0 : _triggersArray$i7.shouldReturnPayload) === true)) {\n                            _context13.next = 15;\n                            break;\n                          }\n\n                          return _context13.abrupt(\"return\", {\n                            v: {\n                              payload: payload,\n                              response: _response\n                            }\n                          });\n\n                        case 15:\n                          if (!(((_triggersArray$i8 = triggersArray[i]) === null || _triggersArray$i8 === void 0 ? void 0 : _triggersArray$i8.shouldReturnResponse) === true)) {\n                            _context13.next = 17;\n                            break;\n                          }\n\n                          return _context13.abrupt(\"return\", {\n                            v: _response\n                          });\n\n                        case 17:\n                          return _context13.abrupt(\"break\", 83);\n\n                        case 18:\n                          if (triggersArray[i].message) {\n                            _context13.next = 20;\n                            break;\n                          }\n\n                          throw new Error('web3Sign trigger does not have a message to sign');\n\n                        case 20:\n                          if (!(!triggersArray[i].signer || triggersArray[i].signer)) {\n                            _context13.next = 22;\n                            break;\n                          }\n\n                          throw new Error('web3Sign trigger signer address missing or invalid');\n\n                        case 22:\n                          _context13.next = 24;\n                          return _this3.getInternalWeb3Provider().signer.signMessage(triggersArray[i].message);\n\n                        case 24:\n                          _response = _context13.sent;\n\n                          if (!((_triggersArray$i9 = triggersArray[i]) !== null && _triggersArray$i9 !== void 0 && _triggersArray$i9.shouldAwait)) {\n                            _context13.next = 29;\n                            break;\n                          }\n\n                          _context13.next = 28;\n                          return _response.wait();\n\n                        case 28:\n                          _response = _context13.sent;\n\n                        case 29:\n                          // Save response\n                          if (((_triggersArray$i10 = triggersArray[i]) === null || _triggersArray$i10 === void 0 ? void 0 : _triggersArray$i10.saveResponse) === true) _this3.memoryCard.save(_response); // Return payload and response\n\n                          if (!(((_triggersArray$i11 = triggersArray[i]) === null || _triggersArray$i11 === void 0 ? void 0 : _triggersArray$i11.shouldReturnPayload) === true)) {\n                            _context13.next = 32;\n                            break;\n                          }\n\n                          return _context13.abrupt(\"return\", {\n                            v: {\n                              payload: payload,\n                              response: _response\n                            }\n                          });\n\n                        case 32:\n                          if (!(((_triggersArray$i12 = triggersArray[i]) === null || _triggersArray$i12 === void 0 ? void 0 : _triggersArray$i12.shouldReturnResponse) === true)) {\n                            _context13.next = 34;\n                            break;\n                          }\n\n                          return _context13.abrupt(\"return\", {\n                            v: _response\n                          });\n\n                        case 34:\n                          return _context13.abrupt(\"break\", 83);\n\n                        case 35:\n                          if (triggersArray[i].pluginName) {\n                            _context13.next = 37;\n                            break;\n                          }\n\n                          throw new Error('callPluginEndpoint trigger does not have an plugin name to call');\n\n                        case 37:\n                          if (triggersArray[i].endpoint) {\n                            _context13.next = 39;\n                            break;\n                          }\n\n                          throw new Error('callPluginEndpoint trigger does not have an endpoint to call');\n\n                        case 39:\n                          if (!(((_triggersArray$i13 = triggersArray[i]) === null || _triggersArray$i13 === void 0 ? void 0 : _triggersArray$i13.shouldAwait) === true)) {\n                            _context13.next = 44;\n                            break;\n                          } // Check if a saved response has to be used to fill a parameter needed by the plugin\n\n\n                          if (triggersArray[i].useSavedResponse === true) {\n                            triggersArray[i].params[triggersArray[i].savedResponseAs] = _this3.memoryCard.get(triggersArray[i].savedResponseAt);\n                          } // Call the endpoint\n\n\n                          _context13.next = 43;\n                          return (0, _Cloud.run)((0, _concat.default)(_context11 = \"\".concat(triggersArray[i].pluginName, \"_\")).call(_context11, triggersArray[i].endpoint), triggersArray[i].params);\n\n                        case 43:\n                          _response = _context13.sent;\n\n                        case 44:\n                          // Call a plugin endpoint (does NOT await)\n                          if (((_triggersArray$i14 = triggersArray[i]) === null || _triggersArray$i14 === void 0 ? void 0 : _triggersArray$i14.shouldAwait) === false) {\n                            // Check if a saved response has to be used to fill a parameter needed by the plugin\n                            if (triggersArray[i].useSavedResponse === true) {\n                              triggersArray[i].params[triggersArray[i].savedResponseAs] = _this3.memoryCard.get(triggersArray[i].savedResponseAt);\n                            } // Call the endpoint\n\n\n                            _response = (0, _Cloud.run)((0, _concat.default)(_context12 = \"\".concat(triggersArray[i].pluginName, \"_\")).call(_context12, triggersArray[i].endpoint), triggersArray[i].params);\n                          } // If the response contains a trigger, run it\n\n\n                          if (!(triggersArray[i].runResponseTrigger === true)) {\n                            _context13.next = 49;\n                            break;\n                          }\n\n                          _context13.next = 48;\n                          return _this3.handleTriggers(_response.data.result.triggers, _response.data.result.data);\n\n                        case 48:\n                          _response = _context13.sent;\n\n                        case 49:\n                          // Save response\n                          if (((_triggersArray$i15 = triggersArray[i]) === null || _triggersArray$i15 === void 0 ? void 0 : _triggersArray$i15.saveResponse) === true) _this3.memoryCard.save(_response); // If should not run the response trigger, continues the loop and does not return (to avoid breaking the loop execution and run other pending triggers)\n\n                          if (!(((_triggersArray$i16 = triggersArray[i]) === null || _triggersArray$i16 === void 0 ? void 0 : _triggersArray$i16.runResponseTrigger) === false)) {\n                            _context13.next = 52;\n                            break;\n                          }\n\n                          return _context13.abrupt(\"return\", \"continue\");\n\n                        case 52:\n                          if (!(((_triggersArray$i17 = triggersArray[i]) === null || _triggersArray$i17 === void 0 ? void 0 : _triggersArray$i17.shouldReturnPayload) === true)) {\n                            _context13.next = 54;\n                            break;\n                          }\n\n                          return _context13.abrupt(\"return\", {\n                            v: {\n                              payload: 'payload',\n                              response: _response\n                            }\n                          });\n\n                        case 54:\n                          if (!(((_triggersArray$i18 = triggersArray[i]) === null || _triggersArray$i18 === void 0 ? void 0 : _triggersArray$i18.shouldReturnResponse) === true)) {\n                            _context13.next = 56;\n                            break;\n                          }\n\n                          return _context13.abrupt(\"return\", {\n                            v: _response\n                          });\n\n                        case 56:\n                          return _context13.abrupt(\"break\", 83);\n\n                        case 57:\n                          if (triggersArray[i].parameters) {\n                            _context13.next = 59;\n                            break;\n                          }\n\n                          throw new Error('web3SignV4 trigger does not have `parameters` to sign');\n\n                        case 59:\n                          if (triggersArray[i].from) {\n                            _context13.next = 61;\n                            break;\n                          }\n\n                          throw new Error('web3SignV4 trigger does not have a `from` address');\n\n                        case 61:\n                          if (!(((_triggersArray$i19 = triggersArray[i]) === null || _triggersArray$i19 === void 0 ? void 0 : _triggersArray$i19.shouldAwait) === true)) {\n                            _context13.next = 76;\n                            break;\n                          }\n\n                          _context13.prev = 62;\n                          _JSON$parse = JSON.parse(triggersArray[i].parameters[1]), domain = _JSON$parse.domain, types = _JSON$parse.types, message = _JSON$parse.message;\n\n                          if (types.EIP712Domain) {\n                            // Ethers.js will compute this automatically\n                            delete types.EIP712Domain;\n                          }\n\n                          _context13.next = 67;\n                          return _this3.getInternalWeb3Provider().signer._signTypedData(domain, types, message);\n\n                        case 67:\n                          signature = _context13.sent;\n                          result = {\n                            result: signature\n                          };\n                          if (((_triggersArray$i20 = triggersArray[i]) === null || _triggersArray$i20 === void 0 ? void 0 : _triggersArray$i20.saveResponse) === true) _this3.memoryCard.save(result);\n                          _response = result;\n                          _context13.next = 76;\n                          break;\n\n                        case 73:\n                          _context13.prev = 73;\n                          _context13.t1 = _context13[\"catch\"](62);\n                          throw new Error(_context13.t1.message || _context13.t1);\n\n                        case 76:\n                          if (((_triggersArray$i21 = triggersArray[i]) === null || _triggersArray$i21 === void 0 ? void 0 : _triggersArray$i21.shouldAwait) === false) {\n                            _JSON$parse2 = JSON.parse(triggersArray[i].parameters[1]), _domain = _JSON$parse2.domain, _types = _JSON$parse2.types, _message = _JSON$parse2.message;\n\n                            if (_types.EIP712Domain) {\n                              // Ethers.js will compute this automatically\n                              delete _types.EIP712Domain;\n                            }\n\n                            _this3.getInternalWeb3Provider().signer._signTypedData(_domain, _types, _message) // eslint-disable-next-line no-loop-func\n                            .then(function (signature) {\n                              var _triggersArray$i22;\n\n                              var result = {\n                                result: signature\n                              };\n                              if (((_triggersArray$i22 = triggersArray[i]) === null || _triggersArray$i22 === void 0 ? void 0 : _triggersArray$i22.saveResponse) === true) _this3.memoryCard.save(result);\n                              _response = result;\n                            }).catch(function (error) {\n                              throw new Error(error.message || error);\n                            });\n                          } // Return payload and response\n\n\n                          if (!(((_triggersArray$i23 = triggersArray[i]) === null || _triggersArray$i23 === void 0 ? void 0 : _triggersArray$i23.shouldReturnPayload) === true)) {\n                            _context13.next = 79;\n                            break;\n                          }\n\n                          return _context13.abrupt(\"return\", {\n                            v: {\n                              payload: payload,\n                              response: _response\n                            }\n                          });\n\n                        case 79:\n                          if (!(((_triggersArray$i24 = triggersArray[i]) === null || _triggersArray$i24 === void 0 ? void 0 : _triggersArray$i24.shouldReturnResponse) === true)) {\n                            _context13.next = 81;\n                            break;\n                          }\n\n                          return _context13.abrupt(\"return\", {\n                            v: _response\n                          });\n\n                        case 81:\n                          return _context13.abrupt(\"break\", 83);\n\n                        case 82:\n                          throw new Error(\"Unknown trigger: \\\"\".concat((_triggersArray$i25 = triggersArray[i]) === null || _triggersArray$i25 === void 0 ? void 0 : _triggersArray$i25.name, \"\\\"\"));\n\n                        case 83:\n                        case \"end\":\n                          return _context13.stop();\n                      }\n                    }\n                  }, _loop, null, [[62, 73]]);\n                });\n                i = 0;\n\n              case 4:\n                if (!(i < triggersArray.length)) {\n                  _context14.next = 14;\n                  break;\n                }\n\n                return _context14.delegateYield(_loop(i), \"t0\", 6);\n\n              case 6:\n                _ret = _context14.t0;\n\n                if (!(_ret === \"continue\")) {\n                  _context14.next = 9;\n                  break;\n                }\n\n                return _context14.abrupt(\"continue\", 11);\n\n              case 9:\n                if (!((0, _typeof2.default)(_ret) === \"object\")) {\n                  _context14.next = 11;\n                  break;\n                }\n\n                return _context14.abrupt(\"return\", _ret.v);\n\n              case 11:\n                i++;\n                _context14.next = 4;\n                break;\n\n              case 14:\n                // Delete all saved data\n                this.memoryCard.deleteSaved();\n\n              case 15:\n              case \"end\":\n                return _context14.stop();\n            }\n          }\n        }, _callee9, this);\n      }));\n\n      return function () {\n        return _handleTriggers.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"getAllERC20\",\n    value: function () {\n      var _getAllERC = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee10() {\n        var _ref2,\n            chain,\n            address,\n            result,\n            _args11 = arguments;\n\n        return _regenerator.default.wrap(function (_context15) {\n          while (1) {\n            switch (_context15.prev = _context15.next) {\n              case 0:\n                _ref2 = _args11.length > 0 && _args11[0] !== undefined ? _args11[0] : {}, chain = _ref2.chain, address = _ref2.address;\n                _context15.next = 3;\n                return (0, _Cloud.run)('getAllERC20', {\n                  chain: chain,\n                  address: address\n                });\n\n              case 3:\n                result = _context15.sent;\n                return _context15.abrupt(\"return\", result);\n\n              case 5:\n              case \"end\":\n                return _context15.stop();\n            }\n          }\n        }, _callee10);\n      }));\n\n      return function () {\n        return _getAllERC.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"getERC20\",\n    value: function () {\n      var _getERC = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee11() {\n        var _ref3,\n            chain,\n            address,\n            symbol,\n            tokenAddress,\n            result,\n            _args12 = arguments;\n\n        return _regenerator.default.wrap(function (_context16) {\n          while (1) {\n            switch (_context16.prev = _context16.next) {\n              case 0:\n                _ref3 = _args12.length > 0 && _args12[0] !== undefined ? _args12[0] : {}, chain = _ref3.chain, address = _ref3.address, symbol = _ref3.symbol, tokenAddress = _ref3.tokenAddress;\n                result = (0, _Cloud.run)('getERC20', {\n                  chain: chain,\n                  address: address,\n                  symbol: symbol,\n                  tokenAddress: tokenAddress\n                });\n                return _context16.abrupt(\"return\", result);\n\n              case 3:\n              case \"end\":\n                return _context16.stop();\n            }\n          }\n        }, _callee11);\n      }));\n\n      return function () {\n        return _getERC.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"getNFTs\",\n    value: function () {\n      var _ref4 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          _ref4$chain = _ref4.chain,\n          chain = _ref4$chain === void 0 ? 'Eth' : _ref4$chain,\n          _ref4$address = _ref4.address,\n          address = _ref4$address === void 0 ? '' : _ref4$address;\n\n      return (0, _Cloud.run)('getNFTs_old', {\n        chain: chain,\n        address: address\n      });\n    }\n  }, {\n    key: \"getNFTsCount\",\n    value: function () {\n      var _ref5 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          _ref5$chain = _ref5.chain,\n          chain = _ref5$chain === void 0 ? 'Eth' : _ref5$chain,\n          _ref5$address = _ref5.address,\n          address = _ref5$address === void 0 ? '' : _ref5$address;\n\n      return (0, _Cloud.run)('getNFTsCount_old', {\n        chain: chain,\n        address: address\n      });\n    }\n  }, {\n    key: \"getTransactions\",\n    value: function () {\n      var _ref6 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          _ref6$chain = _ref6.chain,\n          chain = _ref6$chain === void 0 ? 'Eth' : _ref6$chain,\n          _ref6$address = _ref6.address,\n          address = _ref6$address === void 0 ? '' : _ref6$address,\n          _ref6$order = _ref6.order,\n          order = _ref6$order === void 0 ? 'desc' : _ref6$order;\n\n      return (0, _Cloud.run)('getTransactions', {\n        chain: chain,\n        address: address,\n        order: order\n      });\n    }\n  }, {\n    key: \"getTransactionsCount\",\n    value: function () {\n      var _ref7 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          _ref7$chain = _ref7.chain,\n          chain = _ref7$chain === void 0 ? 'Eth' : _ref7$chain,\n          _ref7$address = _ref7.address,\n          address = _ref7$address === void 0 ? '' : _ref7$address;\n\n      return (0, _Cloud.run)('getTransactionsCount', {\n        chain: chain,\n        address: address\n      });\n    }\n  }, {\n    key: \"transfer\",\n    value: function () {\n      var _transfer = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee12() {\n        var _ref8,\n            _ref8$type,\n            type,\n            _ref8$receiver,\n            receiver,\n            _ref8$contractAddress,\n            contractAddress,\n            contract_address,\n            _ref8$amount,\n            amount,\n            _ref8$tokenId,\n            tokenId,\n            token_id,\n            _ref8$system,\n            system,\n            options,\n            _this$getInternalWeb3,\n            internalWeb3,\n            sender,\n            signer,\n            transferOperation,\n            customToken,\n            result,\n            _args13 = arguments;\n\n        return _regenerator.default.wrap(function (_context17) {\n          while (1) {\n            switch (_context17.prev = _context17.next) {\n              case 0:\n                _ref8 = _args13.length > 0 && _args13[0] !== undefined ? _args13[0] : {}, _ref8$type = _ref8.type, type = _ref8$type === void 0 ? 'native' : _ref8$type, _ref8$receiver = _ref8.receiver, receiver = _ref8$receiver === void 0 ? '' : _ref8$receiver, _ref8$contractAddress = _ref8.contractAddress, contractAddress = _ref8$contractAddress === void 0 ? '' : _ref8$contractAddress, contract_address = _ref8.contract_address, _ref8$amount = _ref8.amount, amount = _ref8$amount === void 0 ? '' : _ref8$amount, _ref8$tokenId = _ref8.tokenId, tokenId = _ref8$tokenId === void 0 ? '' : _ref8$tokenId, token_id = _ref8.token_id, _ref8$system = _ref8.system, system = _ref8$system === void 0 ? 'evm' : _ref8$system; // Allow snake-case for backwards compatibility\n                // eslint-disable-next-line camelcase\n\n                contractAddress = contractAddress || contract_address; // eslint-disable-next-line camelcase\n\n                tokenId = tokenId || token_id;\n                options = {\n                  receiver: receiver,\n                  contractAddress: contractAddress,\n                  amount: amount,\n                  tokenId: tokenId,\n                  system: system\n                };\n\n                _TransferUtils.default.isSupportedType(type);\n\n                _TransferUtils.default.validateInput(type, options);\n\n                _this$getInternalWeb3 = this.getInternalWeb3Provider(), internalWeb3 = _this$getInternalWeb3.web3, sender = _this$getInternalWeb3.account, signer = _this$getInternalWeb3.signer;\n\n                if (sender) {\n                  _context17.next = 9;\n                  break;\n                }\n\n                throw new Error('Sender address not found');\n\n              case 9:\n                if (tokenId) _TransferUtils.default.isUint256(tokenId);\n\n                if (type !== 'native') {\n                  customToken = new _ethers.ethers.Contract(contractAddress, _TransferUtils.default.abi[type], signer);\n                }\n\n                _context17.t0 = type;\n                _context17.next = _context17.t0 === 'native' ? 14 : _context17.t0 === 'erc20' ? 16 : _context17.t0 === 'erc721' ? 18 : _context17.t0 === 'erc1155' ? 20 : 22;\n                break;\n\n              case 14:\n                transferOperation = signer.sendTransaction({\n                  to: receiver,\n                  value: _ethers.ethers.BigNumber.from(amount)\n                });\n                return _context17.abrupt(\"break\", 23);\n\n              case 16:\n                transferOperation = customToken.transfer(receiver, amount, {\n                  from: sender\n                });\n                return _context17.abrupt(\"break\", 23);\n\n              case 18:\n                transferOperation = customToken.safeTransferFrom(sender, receiver, \"\".concat(tokenId), {\n                  from: sender\n                });\n                return _context17.abrupt(\"break\", 23);\n\n              case 20:\n                transferOperation = customToken.safeTransferFrom(sender, receiver, \"\".concat(tokenId), amount, '0x', {\n                  from: sender\n                });\n                return _context17.abrupt(\"break\", 23);\n\n              case 22:\n                throw new Error(\"Unknown transfer type: \\\"\".concat(type, \"\\\"\"));\n\n              case 23:\n                _context17.next = 25;\n                return transferOperation;\n\n              case 25:\n                result = _context17.sent;\n                return _context17.abrupt(\"return\", result);\n\n              case 27:\n              case \"end\":\n                return _context17.stop();\n            }\n          }\n        }, _callee12, this);\n      }));\n\n      return function () {\n        return _transfer.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"executeFunction\",\n    value: function () {\n      var _executeFunction = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee13() {\n        var _context18, _context19;\n\n        var _ref9,\n            contractAddress,\n            abi,\n            functionName,\n            msgValue,\n            _ref9$params,\n            params,\n            _ref9$overrides,\n            overrides,\n            contractOptions,\n            _this$getInternalWeb4,\n            account,\n            internalWeb3,\n            provider,\n            signerOrProvider,\n            functionData,\n            stateMutability,\n            isReadFunction,\n            currentAddress,\n            errors,\n            _iterator,\n            _step,\n            input,\n            value,\n            parsedInputs,\n            contract,\n            response,\n            _args14 = arguments;\n\n        return _regenerator.default.wrap(function (_context20) {\n          while (1) {\n            switch (_context20.prev = _context20.next) {\n              case 0:\n                _ref9 = _args14.length > 0 && _args14[0] !== undefined ? _args14[0] : {}, contractAddress = _ref9.contractAddress, abi = _ref9.abi, functionName = _ref9.functionName, msgValue = _ref9.msgValue, _ref9$params = _ref9.params, params = _ref9$params === void 0 ? {} : _ref9$params, _ref9$overrides = _ref9.overrides, overrides = _ref9$overrides === void 0 ? {} : _ref9$overrides;\n                contractOptions = {};\n                _this$getInternalWeb4 = this.getInternalWeb3Provider(), account = _this$getInternalWeb4.account, internalWeb3 = _this$getInternalWeb4.web3, provider = _this$getInternalWeb4.provider, signerOrProvider = _this$getInternalWeb4.signerOrProvider;\n                functionData = (0, _find.default)(abi).call(abi, function (x) {\n                  return x.name === functionName;\n                });\n\n                if (functionData) {\n                  _context20.next = 6;\n                  break;\n                }\n\n                throw new Error('Function does not exist in abi');\n\n              case 6:\n                stateMutability = functionData === null || functionData === void 0 ? void 0 : functionData.stateMutability;\n                isReadFunction = stateMutability === 'view' || stateMutability === 'pure';\n\n                if (isReadFunction) {\n                  _context20.next = 14;\n                  break;\n                }\n\n                if (params.from) {\n                  _context20.next = 14;\n                  break;\n                }\n\n                currentAddress = account;\n\n                if (currentAddress) {\n                  _context20.next = 13;\n                  break;\n                }\n\n                throw new Error('From address is required');\n\n              case 13:\n                contractOptions.from = currentAddress;\n\n              case 14:\n                errors = [];\n                _iterator = _createForOfIteratorHelper(functionData.inputs);\n\n                try {\n                  for (_iterator.s(); !(_step = _iterator.n()).done;) {\n                    input = _step.value;\n                    value = params[input.name];\n\n                    if (!value && typeof value !== 'number' && typeof value !== 'boolean') {\n                      errors.push(\"\".concat(input.name, \" is required\"));\n                    }\n                  }\n                } catch (err) {\n                  _iterator.e(err);\n                } finally {\n                  _iterator.f();\n                }\n\n                if (!(errors.length > 0)) {\n                  _context20.next = 19;\n                  break;\n                }\n\n                throw errors;\n\n              case 19:\n                parsedInputs = (0, _map.default)(_context18 = functionData.inputs).call(_context18, function (x) {\n                  return params[x.name];\n                });\n                contract = new _ethers.ethers.Contract(contractAddress, abi, signerOrProvider);\n                _context20.next = 23;\n                return contract[functionName].apply(contract, (0, _concat.default)(_context19 = (0, _toConsumableArray2.default)((0, _values.default)(parsedInputs))).call(_context19, [msgValue ? {\n                  value: _ethers.ethers.BigNumber.from(\"\".concat(msgValue))\n                } : {}]));\n\n              case 23:\n                response = _context20.sent;\n                return _context20.abrupt(\"return\", response);\n\n              case 25:\n              case \"end\":\n                return _context20.stop();\n            }\n          }\n        }, _callee13, this);\n      }));\n\n      return function () {\n        return _executeFunction.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"getSigningData\",\n    value: function () {\n      return \"Moralis Authentication\";\n    }\n  }, {\n    key: \"ensureWeb3IsInstalled\",\n    value: function () {\n      return this.internalWeb3Provider && this.internalWeb3Provider.web3 ? true : false;\n    }\n    /**\n     * Gets the internalWeb3Provider with validation to make sure it has been instansiated with 'enableWeb3()'\n     */\n\n  }, {\n    key: \"getInternalWeb3Provider\",\n    value: function () {\n      if (!this.ensureWeb3IsInstalled()) throw new Error(ERROR_WEB3_MISSING);\n      return this.internalWeb3Provider;\n    }\n    /**\n     * Gets web3 from the internalWeb3Provider with validation to make sure it has been instansiated with 'enableWeb3()'\n     */\n\n  }, {\n    key: \"getInternalWeb3\",\n    value: function () {\n      return this.getInternalWeb3Provider().web3;\n    }\n  }, {\n    key: \"provider\",\n    get: function () {\n      var _this$internalWeb3Pro, _this$internalWeb3Pro2;\n\n      return (_this$internalWeb3Pro = (_this$internalWeb3Pro2 = this.internalWeb3Provider) === null || _this$internalWeb3Pro2 === void 0 ? void 0 : _this$internalWeb3Pro2.provider) !== null && _this$internalWeb3Pro !== void 0 ? _this$internalWeb3Pro : null;\n    }\n  }, {\n    key: \"connector\",\n    get: function () {\n      var _this$internalWeb3Pro3, _this$internalWeb3Pro4;\n\n      return (_this$internalWeb3Pro3 = (_this$internalWeb3Pro4 = this.internalWeb3Provider) === null || _this$internalWeb3Pro4 === void 0 ? void 0 : _this$internalWeb3Pro4.connector) !== null && _this$internalWeb3Pro3 !== void 0 ? _this$internalWeb3Pro3 : null;\n    }\n  }, {\n    key: \"connectorType\",\n    get: function () {\n      var _this$connector$type, _this$connector;\n\n      return (_this$connector$type = (_this$connector = this.connector) === null || _this$connector === void 0 ? void 0 : _this$connector.type) !== null && _this$connector$type !== void 0 ? _this$connector$type : null;\n    }\n  }, {\n    key: \"network\",\n    get: function () {\n      var _this$connector$netwo, _this$connector2;\n\n      return (_this$connector$netwo = (_this$connector2 = this.connector) === null || _this$connector2 === void 0 ? void 0 : _this$connector2.network) !== null && _this$connector$netwo !== void 0 ? _this$connector$netwo : null;\n    }\n  }, {\n    key: \"account\",\n    get: function () {\n      var _this$internalWeb3Pro5, _this$internalWeb3Pro6;\n\n      return (_this$internalWeb3Pro5 = (_this$internalWeb3Pro6 = this.internalWeb3Provider) === null || _this$internalWeb3Pro6 === void 0 ? void 0 : _this$internalWeb3Pro6.account) !== null && _this$internalWeb3Pro5 !== void 0 ? _this$internalWeb3Pro5 : null;\n    }\n  }, {\n    key: \"chainId\",\n    get: function () {\n      var _this$internalWeb3Pro7, _this$internalWeb3Pro8;\n\n      return (_this$internalWeb3Pro7 = (_this$internalWeb3Pro8 = this.internalWeb3Provider) === null || _this$internalWeb3Pro8 === void 0 ? void 0 : _this$internalWeb3Pro8.chainId) !== null && _this$internalWeb3Pro7 !== void 0 ? _this$internalWeb3Pro7 : null;\n    }\n  }, {\n    key: \"getChainId\",\n    value: function () {\n      return this.chainId;\n    }\n  }, {\n    key: \"_forwardToConnector\",\n    value: function (methodName, args) {\n      var _this$getInternalWeb5 = this.getInternalWeb3Provider(),\n          connector = _this$getInternalWeb5.connector;\n\n      var hasMethod = Boolean(connector[methodName]);\n\n      if (!hasMethod) {\n        var _context21;\n\n        throw new Error((0, _concat.default)(_context21 = \"Cannot call \".concat(methodName, \", as it does not exist on connector type \\\"\")).call(_context21, connector.type, \"\\\"\"));\n      }\n\n      return connector[methodName].apply(connector, (0, _toConsumableArray2.default)(args));\n    }\n  }, {\n    key: \"switchNetwork\",\n    value: function () {\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      return this._forwardToConnector('switchNetwork', args);\n    }\n  }, {\n    key: \"addNetwork\",\n    value: function () {\n      for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        args[_key2] = arguments[_key2];\n      }\n\n      return this._forwardToConnector('addNetwork', args);\n    }\n  }, {\n    key: \"isMetaMaskInstalled\",\n    value: function () {\n      var _isMetaMaskInstalled = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee14() {\n        return _regenerator.default.wrap(function (_context22) {\n          while (1) {\n            switch (_context22.prev = _context22.next) {\n              case 0:\n                _context22.next = 2;\n                return (0, _detectProvider.default)();\n\n              case 2:\n                if (!_context22.sent) {\n                  _context22.next = 6;\n                  break;\n                }\n\n                _context22.t0 = true;\n                _context22.next = 7;\n                break;\n\n              case 6:\n                _context22.t0 = false;\n\n              case 7:\n                return _context22.abrupt(\"return\", _context22.t0);\n\n              case 8:\n              case \"end\":\n                return _context22.stop();\n            }\n          }\n        }, _callee14);\n      }));\n\n      return function () {\n        return _isMetaMaskInstalled.apply(this, arguments);\n      };\n    }()\n  }]);\n  return MoralisWeb3;\n}();\n\n(0, _defineProperty2.default)(MoralisWeb3, \"speedyNodeApiKey\", void 0);\n(0, _defineProperty2.default)(MoralisWeb3, \"web3\", null);\n(0, _defineProperty2.default)(MoralisWeb3, \"internalWeb3Provider\", null);\n(0, _defineProperty2.default)(MoralisWeb3, \"Plugins\", {});\n(0, _defineProperty2.default)(MoralisWeb3, \"memoryCard\", {\n  save: function (what) {\n    this.saved = what;\n  },\n  get: function (where) {\n    if (!this.saved) throw new Error('Nothing saved to memory card'); // In case the saved data is not an object but a simple string or number\n\n    if (where.length === 0) return this.getSaved();\n    var tmp;\n    var savedTmp = this.saved;\n\n    for (var i = 0; i < where.length; i++) {\n      tmp = savedTmp[where[i]];\n      savedTmp = tmp;\n    }\n\n    return savedTmp;\n  },\n  getSaved: function () {\n    return this.saved;\n  },\n  deleteSaved: function () {\n    this.saved = undefined;\n  }\n});\nMoralisWeb3.onConnect = (0, _bind.default)(_context23 = MoralisWeb3.on).call(_context23, MoralisWeb3, _InternalWeb3Provider.InternalWeb3Events.PROVIDER_CONNECT);\nMoralisWeb3.onDisconnect = (0, _bind.default)(_context24 = MoralisWeb3.on).call(_context24, MoralisWeb3, _InternalWeb3Provider.InternalWeb3Events.PROVIDER_DISCONNECT);\nMoralisWeb3.onWeb3Enabled = (0, _bind.default)(_context25 = MoralisWeb3.on).call(_context25, MoralisWeb3, _InternalWeb3Provider.InternalWeb3Events.WEB3_ENABLED);\nMoralisWeb3.onWeb3Deactivated = (0, _bind.default)(_context26 = MoralisWeb3.on).call(_context26, MoralisWeb3, _InternalWeb3Provider.InternalWeb3Events.WEB3_DEACTIVATED);\nMoralisWeb3.onChainChanged = (0, _bind.default)(_context27 = MoralisWeb3.on).call(_context27, MoralisWeb3, _InternalWeb3Provider.InternalWeb3Events.CHAIN_CHANGED);\nMoralisWeb3.onAccountChanged = (0, _bind.default)(_context28 = MoralisWeb3.on).call(_context28, MoralisWeb3, _InternalWeb3Provider.InternalWeb3Events.ACCOUNT_CHANGED);\nvar _default = MoralisWeb3;\nexports.default = _default;"]},"metadata":{},"sourceType":"script"}